CLIENT_ID="963009065087-2a5ccl5rhm4ghgm88li21fkjgsu5eua0@developer.gserviceaccount.com",SCOPES="https://www.googleapis.com/auth/userinfo.email",RESPONSE_TYPE="token id_token",init=function(){var o,a="//"+window.location.host+"/_ah/api";-1===window.location.host.indexOf("localhost")&&(a="https://roseboticsweb.appspot.com/_ah/api");var t=function(){0==--o&&angular.bootstrap(document,["TeamApp"])};o=2,gapi.client.load("teams","v1",t,a),gapi.client.load("oauth2","v2",t)};
"use strict";angular.module("TeamApp",["TeamControllers","ModalControllers","OverviewControllers","ManageControllers","TeamServices","InviteControllers","ui.bootstrap","ngRoute","TeamDirectives","angular.snackbar"]).config(["$routeProvider",function(e){e.when("/overview/",{templateUrl:"/static/teams/partials/overview.html",controller:"OverviewCtrl as overview"}).when("/preview/",{templateUrl:"/static/teams/partials/preview.html",controller:"PreviewCtrl as preview"}).when("/teams/",{templateUrl:"/static/teams/partials/teams.html",controller:"TeamsCtrl as teams",resolve:{teams:["api",function(e){return e.getTeams()}]}}).when("/teams/:team_key/courses",{templateUrl:"/static/teams/partials/teams_course.html",controller:"TeamsCourseCtrl as courses",resolve:{team:["api","$route",function(e,t){return e.getProgress(t.current.params)}]}}).when("/teams/:team_key/courses/:course_name/tracks",{templateUrl:"/static/teams/partials/teams_track.html",controller:"TeamsTrackCtrl as tracks",resolve:{team:["api","$route",function(e,t){return e.getProgress(t.current.params)}]}}).when("/teams/:team_key/courses/:course_name/tracks/:track_name/units",{templateUrl:"/static/teams/partials/teams_unit.html",controller:"TeamsUnitCtrl as units",resolve:{team:["api","$route",function(e,t){return e.getProgress(t.current.params)}]}}).when("/invites/",{templateUrl:"/static/teams/partials/invites.html",controller:"InvitesCtrl as invites",resolve:{invites:["api",function(e){return e.getInvites()}]}}).when("/manage/",{templateUrl:"/static/teams/partials/manage.html",controller:"ManageCtrl as manage",resolve:{teams:["api",function(e){return e.getLeadTeams()}]}}).when("/manage/:team_key",{templateUrl:"/static/teams/partials/manage_team.html",controller:"ManageTeamCtrl as manage",resolve:{teams:["api",function(e){return e.getLeadTeams()}],user:["oAuth",function(e){return e.getUserInfo()}],courses:["api",function(e){return e.getCourses()}]}}).when("/manage/:team_key/sweeps",{templateUrl:"/static/teams/partials/manage_sweeps.html",controller:"SweepsTeamCtrl as sweeps",resolve:{teams:["api",function(e){return e.getLeadTeams()}],sweeps:["api","$route",function(e,t){return e.getSweeps(t.current.params)}],progress:["api","$route",function(e,t){return e.getProgress(t.current.params)}]}}).otherwise({redirectTo:"/overview/"})}]).run(["$rootScope","$location","oAuth","sidebar",function(e,t,r,a){angular.element(document.querySelectorAll(".hidden.container")).removeClass("hidden"),angular.element(document.querySelector("div.spinner")).addClass("hidden"),r.check().then(null,function(){t.path("/preview"),a.show.set(!1)})}]);
angular.module("InviteControllers",[]).controller("InvitesCtrl",["invites","api","snackbar",function(e,s,n){this.pending=[],this.accepted=[];var t=e.invites;void 0==t&&(t=[]);for(var i=0;i<t.length;i++)"NOT_CHOSEN"===t[i].response?this.pending.push(t[i]):this.accepted.push(t[i]);var r=this;this.editInvite=function(e,t){var i=!1;if("NOT_CHOSEN"===e.response&&"NOT_CHOSEN"!==t){for(var o=0;o<r.pending.length;o++)if(r.pending[o].team_key===e.team_key){r.pending.splice(o,1);break}r.accepted.push(e),i=!0}if("REJECT_INVITE"===t){for(var o=0;o<r.accepted.length;o++)if(r.accepted[o].team_key===e.team_key){r.accepted.splice(o,1);break}i=!0}e.response=t,n.create("Sending response...",4),s.editInvite(e).then(function(){n.remove(4),n.createWithTimeout("<b>Success!</b> Response saved"),i&&s.getTeams(!0)},function(){n.remove(4),n.createWithTimeout("<b>Error!</b> Response not saved")})},this.pendingResponses=["NOT_CHOSEN","ALL_MEMBERS","TEAM_LEADER","REJECT_INVITE"],this.acceptedResponses=["ALL_MEMBERS","TEAM_LEADER","REJECT_INVITE"],this.responseOptions={NOT_CHOSEN:"No response",ALL_MEMBERS:"All members can see my progress",TEAM_LEADER:"Only the leader can see my progress",REJECT_INVITE:"Reject invite and no one can see my progress"}}]);
angular.module("ManageControllers",[]).controller("ManageCtrl",["$modal","teams","api","snackbar","oAuth",function(e,t,r,o,s){this.items=t.teams;var a=this;this.toggleCreateTeamModal=function(){var n=e.open({templateUrl:"/static/teams/partials/modals/create_team_modal.html",controller:"CreateTeamModalInstanceCtrl",controllerAs:"modal",resolve:{user:function(){return s.getUserInfo()},courses:function(){return r.getCourses()}}});n.result.then(function(e){o.create("Creating team...",1),r.insertTeam(e).then(function(e){o.remove(1),o.createWithTimeout("<b>Success!</b> Team created"),void 0==t.teams&&(t.teams=[],a.items=t.teams),t.teams.push(e)},function(e){o.remove(1),o.createWithTimeout("<b>Error!</b> Team not created")})})}}]).controller("ManageTeamCtrl",["$routeParams","$modal","teams","$scope","snackbar","api","$location","user","courses",function(e,t,r,o,s,a,n,i,m){for(var l=r.teams,c=-1,u=0;u<l.length;u++)if(l[u].team_key==e.team_key){this.team=l[u],c=u;break}this.goToSweep=function(){n.path(n.path()+"/sweeps")},this.offeredCourses=m,console.log(m),this.getCourseTitle=function(e){for(var t=0;t<m.ids.length;t++)if(m.ids[t]===e)return m.titles[t];return""};var p=0,h=this,d=o.$watch(function(){return h.team},function(){p++,h.onInputMadeDirty(p)},!0);this.onInputMadeDirty=function(e){e>1&&(s.createWithTimeout("<b>Warning!</b> You must press submit to save your changes"),d())},this.deleteMember=function(e){for(var t=h.team.members,r=0;r<t.length;r++)if(t[r].email==e.email){t.splice(r,1);break}},this.saveTeam=function(){s.create("Saving team...",3),a.insertTeam(h.team).then(function(e){s.remove(3),s.createWithTimeout("<b>Success!</b> Team saved")},function(){s.remove(3),s.createWithTimeout("<b>Error!</b> Team not saved")})},this.toggleDeleteTeamModal=function(){var e=t.open({templateUrl:"/static/teams/partials/modals/delete_team_modal.html",controller:"DeleteTeamModalInstanceCtrl",controllerAs:"modal"});e.result.then(function(){l.splice(u,1),s.create("Deleting team...",2),a.deleteTeam(h.team).then(function(){s.remove(2),s.createWithTimeout("<b>Success!</b> Team deleted")},function(){s.remove(2),s.createWithTimeout("<b>Error!</b> Team not deleted")}),n.path("/manage")})},this.toggleCreateMemberModal=function(){var e=t.open({templateUrl:"/static/teams/partials/modals/create_member_modal.html",controller:"NewMemberModalInstanceCtrl",controllerAs:"modal"});e.result.then(function(e){var t={email:e,visibility:"NOT_CHOSEN"};void 0==h.team.members&&(h.team.members=[]),e==i.email&&(t.visibility="ALL_MEMBERS"),h.team.members.push(t),h.team.newMembers=!0})},this.visibilityOptions={NOT_CHOSEN:"No Response",ALL_MEMBERS:"Progress visible by everyone",TEAM_LEADER:"Progress visible by leader only"}}]).controller("SweepsTeamCtrl",["$routeParams","$modal","teams","sweeps","$location","progress","snackbar","api","$scope",function(e,t,r,o,s,a,n,i,m){var l=r.teams;this.sweeps=o.sweeps||[];var c=-1;this.today=new Date,this.timezones=["UTC","PDT","MDT","CDT","EDT","PST","MST","CST","EST"],this.done=function(){s.path("/manage/"+e.team_key)};for(var u=0;u<l.length;u++)if(l[u].team_key==e.team_key){this.team=l[u],c=u;break}for(var p=this,u=0;u<this.sweeps.length;u++){var h=this.sweeps[u];h.hourNum=parseInt(h.hour);var d=new Date(0);d.setFullYear(h.year),d.setMonth(parseInt(h.month)-1,parseInt(h.day)),h.dt=d}this.saveSweep=function(e){n.create("Saving Sweep...",6),e.hour=e.hourNum.toString(),e.year=e.dt.getFullYear().toString(),e.month=(e.dt.getMonth()+1).toString(),e.day=e.dt.getDate().toString(),i.insertSweep(e).then(function(e){n.remove(6),n.createWithTimeout("<b>Success!</b> Sweep saved")},function(){n.remove(6),n.createWithTimeout("<b>Error!</b> Sweep not saved")})},this.deleteSweep=function(e){n.create("Removing Sweep...",7),i.deleteSweep(e).then(function(){for(var t=0;t<p.sweeps.length;t++)if(e.sweep_key===p.sweeps[t].sweep_key){p.sweeps.splice(t,1);break}n.remove(7),n.createWithTimeout("<b>Success!</b> Sweep removed")},function(){n.remove(7),n.createWithTimeout("<b>Error!</b> Sweep not removed")})},this.stopEvent=function(e){e.preventDefault(),e.stopPropagation()},this.toggleImportSweepsDialog=function(){var e=t.open({templateUrl:"/static/teams/partials/modals/import_sweeps_modal.html",controller:"ImportSweepsModalInstanceCtrl",controllerAs:"modal",resolve:{teams:function(){return l}}});e.result.then(function(e){console.log(e),n.create("Importing from "+e.name+"...",10),i.getSweeps(e).then(function(e){if(console.log(e),!e.sweeps||!e.sweeps.length)return n.remove(10),void n.createWithTimeout("<b>Error!</b> There were no sweeps to import");for(var t=0;t<e.sweeps.length;t++){var r=e.sweeps[t];delete r.sweep_key,r.team_key=p.team.team_key,i.insertSweep(r).then(function(e){console.log(e),e.hourNum=parseInt(e.hour);var t=new Date(0);t.setFullYear(e.year),t.setMonth(parseInt(e.month)-1,parseInt(e.day)),e.dt=t,void 0==o.sweeps&&(o.sweeps=[],p.sweeps=o.sweeps);for(var r=!1,s=0;s<p.sweeps.length;s++)if(p.sweeps[s].dt.getTime()<e.dt.getTime()||p.sweeps[s].dt.getTime()===e.dt.getTime()&&p.sweeps[s].hourNum<e.hourNum){p.sweeps.splice(s,0,e),r=!0;break}r||p.sweeps.push(e)})}n.remove(10),n.createWithTimeout("<b>Success!</b> Sweeps Imported")},function(){n.remove(10),n.createWithTimeout("<b>Error!</b> Import failed")})})},this.toggleSweepOptionsModal=function(e){var r=t.open({templateUrl:"/static/teams/partials/modals/export_progress_modal.html",controller:"SweepOptionsModalInstanceCtrl",controllerAs:"modal",resolve:{team:function(){return a},optionString:function(){return e.options}}});r.result.then(function(t){e.options=t})},this.toggleCreateSweepDialog=function(){var r=t.open({templateUrl:"/static/teams/partials/modals/create_sweep_modal.html",controller:"NewSweepModalInstanceCtrl",controllerAs:"modal",resolve:{team_key:function(){return e.team_key},progress:function(){return a}}});r.result.then(function(e){n.create("Creating Sweep...",8),e.hour=e.hourNum.toString(),e.year=e.dt.getFullYear().toString(),e.month=(e.dt.getMonth()+1).toString(),e.day=e.dt.getDate().toString(),i.insertSweep(e).then(function(e){console.log(e),e.hourNum=parseInt(e.hour);var t=new Date(0);t.setFullYear(e.year),t.setMonth(parseInt(e.month)-1,parseInt(e.day)),e.dt=t,void 0==o.sweeps&&(o.sweeps=[],p.sweeps=o.sweeps);for(var r=!1,s=0;s<p.sweeps.length;s++)if(p.sweeps[s].dt.getTime()<e.dt.getTime()||p.sweeps[s].dt.getTime()===e.dt.getTime()&&p.sweeps[s].hourNum<e.hourNum){p.sweeps.splice(s,0,e),r=!0;break}r||p.sweeps.push(e),n.remove(8),n.createWithTimeout("<b>Success!</b> Sweep created")},function(){n.remove(8),n.createWithTimeout("<b>Error!</b> Sweep not created")})})}}]);
angular.module("ModalControllers",[]).controller("ModalToggleCtrl",["$modal",function(t){this.toggleSignOutModal=function(){t.open({templateUrl:"logout_modal.html",controller:"SimpleModalInstanceCtrl",controllerAs:"modal"})},this.toggleEditProfileModal=function(){t.open({templateUrl:"edit_profile_modal.html",controller:"SimpleModalInstanceCtrl",controllerAs:"modal"})}}]).controller("SimpleModalInstanceCtrl",["$modalInstance",function(t){this.cancel=function(){t.dismiss("cancel")}}]).controller("NewMemberModalInstanceCtrl",["$modalInstance","$controller",function(t,e){angular.extend(this,e("SimpleModalInstanceCtrl",{$modalInstance:t})),this.email="",this.addMember=function(e){return e=e.trim(),0===e.length?void t.dismiss("cancel"):(e.indexOf("@")<0&&(e+="@gmail.com"),void t.close(e))}}]).controller("DeleteTeamModalInstanceCtrl",["$modalInstance","$controller",function(t,e){angular.extend(this,e("SimpleModalInstanceCtrl",{$modalInstance:t})),this.remove=function(){t.close()}}]).controller("ImportSweepsModalInstanceCtrl",["$modalInstance","$controller","teams",function(t,e,n){angular.extend(this,e("SimpleModalInstanceCtrl",{$modalInstance:t})),this.teams=n,this.selectedTeam=n[0],this["import"]=function(){t.close(this.selectedTeam)}}]).controller("CreateTeamModalInstanceCtrl",["$modalInstance","$controller","user","courses",function(t,e,n,o){angular.extend(this,e("SimpleModalInstanceCtrl",{$modalInstance:t})),this.teamName="",this.teamMembers="",this.includeLeader=!1;var s=this;this.courses=angular.copy(o.ids),this.offeredCourses=o,this.getCourseTitle=function(t){for(var e=0;e<o.ids.length;e++)if(o.ids[e]===t)return o.titles[e];return""},this.add=function(){for(var e={name:s.teamName,leader:n.email,members:[],courses:s.courses},o=s.teamMembers.split(","),l=0;l<o.length;l++){var r=o[l].trim();0!==r.length&&(r.indexOf("@")<0&&(r+="@gmail.com"),e.members.push({email:r,visibility:"NOT_CHOSEN"}))}s.includeLeader&&e.members.push({email:n.email,visibility:"ALL_MEMBERS"}),t.close(e)}}]).controller("ExportModalParentCtrl",["$modalInstance","$controller","team","$window",function(t,e,n){angular.extend(this,e("SimpleModalInstanceCtrl",{$modalInstance:t})),this.team=n,this.fullname=!0,this.username=!0,this.hasTimestamp=!0,this.pointValue="points",this.pointsPerUnit=parseInt(localStorage.getItem("ppu"))||1,this.pointsPerTask=parseInt(localStorage.getItem("ppt"))||1,this.includeCourseProgress=!1,this.includeTrackProgress=!1,this.timezone="EST",this.timezones=["UTC","PDT","MDT","CDT","EDT","PST","MST","CST","EST"];this.generate=function(){var t="team_urlsafe="+n.team_key;this.fullname&&(t+="&student_name=true"),this.username&&(t+="&rose_username=true"),this.hasTimestamp&&(t+="&timezone="+this.timezone),this.includeCourseProgress&&(t+="&course_progress=true"),this.includeTrackProgress&&(t+="&track_progress=true"),"points"===this.pointValue?(t+="&ppu="+this.pointsPerUnit,localStorage.setItem("ppu",this.pointsPerUnit)):(t+="&ppt="+this.pointsPerTask,localStorage.setItem("ppt",this.pointsPerTask)),this.onPostGenerate(t)}}]).controller("ExportModalInstanceCtrl",["$modalInstance","$controller","team","$window",function(t,e,n,o){angular.extend(this,e("ExportModalParentCtrl",{$modalInstance:t,$controller:e,team:n})),this.onPostGenerate=function(e){var n="http://"+o.location.host+"/teams/export.csv?";o.open(n+encodeURI(e),"_blank"),t.close()},this.doneButtonText="Generate"}]).controller("NewSweepModalInstanceCtrl",["$modalInstance","$controller","team_key","$modal","progress",function(t,e,n,o,s){angular.extend(this,e("SimpleModalInstanceCtrl",{$modalInstance:t})),this.sweep={dt:new Date,team_key:n,options:"",hourNum:12,tz:"EST"},this.timezones=["UTC","PDT","MDT","CDT","EDT","PST","MST","CST","EST"],this.today=new Date,this.stopEvent=function(t){t.preventDefault(),t.stopPropagation()},this.addSweep=function(){t.close(this.sweep)};var l=this;this.toggleSweepOptionsModal=function(){var t=o.open({templateUrl:"/static/teams/partials/modals/export_progress_modal.html",controller:"SweepOptionsModalInstanceCtrl",controllerAs:"modal",resolve:{team:function(){return s},optionString:function(){return l.sweep.options}}});t.result.then(function(t){l.sweep.options=t})}}]).controller("SweepOptionsModalInstanceCtrl",["$modalInstance","$controller","team","optionString",function(t,e,n,o){if(angular.extend(this,e("ExportModalParentCtrl",{$modalInstance:t,$controller:e,team:n})),this.onPostGenerate=function(e){t.close(e)},this.doneButtonText="Done",""!==o){var s={};o=o.split("&");for(var l=0;l<o.length;l++){var r=o[l].split("=");s[r[0]]=r[1]}this.fullname="true"===s.student_name,this.username="true"===s.rose_username,this.hasTimestamp=void 0!=s.timezone,this.pointValue=s.ppu?"points":"tasks",this.pointsPerUnit=parseInt(s.ppu)||parseInt(localStorage.getItem("ppu"))||1,this.pointsPerTask=parseInt(s.ppt)||parseInt(localStorage.getItem("ppt"))||1,this.includeCourseProgress="true"===s.course_progress,this.includeTrackProgress="true"===s.track_progress,this.timezone=s.timezone||"EST",this.timezones=["UTC","PDT","MDT","CDT","EDT","PST","MST","CST","EST"]}}]);
angular.module("OverviewControllers",[]).controller("OverviewCtrl",function(){}).controller("PreviewCtrl",["oAuth","$location","sidebar","$rootScope","snackbar","userEmail",function(t,e,o,n,r,i){t.check().then(function(){e.path("/overview"),o.show.set(!0),n.$apply()}),this.signup=function(){t.signup().then(function(){t.getUserInfo().then(function(t){t.email!==i&&r.createWithTimeout("<b>Danger!</b> Signing up for teams with another account may cause errors!",6e3)}),e.path("/overview"),o.show.set(!0)},function(){r.createWithTimeout("<b>Error!</b> Sign up failed")})}}]).controller("SidebarCtrl",["sidebar","$location","$scope",function(t,e,o){this.routes=t.routes,this.show=t.show.get();var n=this;o.$watch(function(){return t.show.get()},function(t){n.show=t}),this.isActive=function(t){var o=e.path();return t=t.substring(1),o.startsWith(t)}}]);
angular.module("TeamControllers",[]).controller("TeamsCtrl",["$modal","teams",function(r,e){this.items=e.teams}]).controller("TeamsParentCtrl",["$modal","team",function(r,e){this.toggleExportProgressModal=function(){r.open({templateUrl:"/static/teams/partials/modals/export_progress_modal.html",controller:"ExportModalInstanceCtrl",controllerAs:"modal",resolve:{team:function(){return e}}})}}]).controller("TeamsCourseCtrl",["$modal","team","$controller",function(r,e,s){if(angular.extend(this,s("TeamsParentCtrl",{$modal:r,team:e})),this.team=e,void 0==e.members_progress&&(this.team.members_progress=[]),this.courses=[],e.members_progress.length>0){courses=e.members_progress[0].course_progress;for(var t=0;t<courses.length;t++)this.courses.push(courses[t].name)}}]).controller("TeamsTrackCtrl",["$routeParams","team","$modal","$controller",function(r,e,s,t){if(angular.extend(this,t("TeamsParentCtrl",{$modal:s,team:e})),this.team=e,void 0==e.members_progress&&(this.team.members_progress=[]),this.course=r.course_name,this.tracks=[],e.members_progress.length>0)for(var o=e.members_progress[0].course_progress,a=0;a<o.length;a++)if(o[a].name===this.course){this.courseNum=a;for(var m=o[a].track_progress,n=0;n<m.length;n++)this.tracks.push(m[n].name);break}var l=this;this.getProgressForMemberTrack=function(r,e){return r.course_progress[l.courseNum].track_progress[e].progress}}]).controller("TeamsUnitCtrl",["$routeParams","team","$modal","$controller",function(r,e,s,t){if(angular.extend(this,t("TeamsParentCtrl",{$modal:s,team:e})),this.team=e,void 0==e.members_progress&&(this.team.members_progress=[]),this.course=r.course_name,this.track=r.track_name,this.units=[],e.members_progress.length>0)for(var o=e.members_progress[0].course_progress,a=0;a<o.length;a++)if(o[a].name===this.course){this.courseNum=a;for(var m=o[a].track_progress,n=0;n<m.length;n++)if(m[n].name===this.track){this.trackNum=n;for(var l=m[n].unit_progress,i=0;i<l.length;i++)this.units.push(l[i].name);break}break}var c=this;this.getProgressForMemberUnit=function(r,e){return r.course_progress[c.courseNum].track_progress[c.trackNum].unit_progress[e].progress}}]);
angular.module("TeamServices",[]).factory("sidebar",function(){var e=!0;return{routes:[{name:"Overview",href:"#/overview/"},{name:"Teams",href:"#/teams/"},{name:"Invites",href:"#/invites/"},{name:"Manage",href:"#/manage/"}],show:{get:function(){return e},set:function(t){e=t}}}}).factory("userEmail",["$rootScope",function(e){return e.userEmail}]).service("oAuth",["$q","$location",function(e,t){var i=function(t){return function(){var i=e.defer();return gapi.auth.authorize({client_id:CLIENT_ID,scope:SCOPES,immediate:t},function(e){e.error?i.reject(e):i.resolve(e)}),i.promise}};this.signup=i(!1),this.check=i(!0),this.execute=function(t){var i=e.defer();return gapi.auth.authorize({client_id:CLIENT_ID,scope:SCOPES,immediate:!0},function(){t.execute(function(e){e.code?i.reject(e):i.resolve(e.result)})}),i.promise},this.getUserInfo=function(){return this.execute(gapi.client.oauth2.userinfo.get())}}]).service("api",["oAuth","$q",function(e,t){var i={};this.deleteCache=function(){i={}};var n=function(n,r){return function(s){var a=t.defer();return void 0!=i[n]&&void 0==s?(a.resolve(i[n]),a.promise):(e.execute(r).then(function(e){i[n]=e,a.resolve(e)},function(e){a.reject(e)}),a.promise)}},r=function(n,r){return function(s){var a=t.defer();return void 0!=i[n+s.team_key]?(a.resolve(i[n+s.team_key]),a.promise):(e.execute(r(s)).then(function(e){i[n+s.team_key]=e,a.resolve(e)},function(e){a.reject(e)}),a.promise)}};this.deleteTeam=function(t){if(void 0!=i.get_teams)for(var n=i.get_teams.teams,r=0;r<n.length;r++)if(t.team_key==n[r].team_key){n.splice(r,1);break}return e.execute(gapi.client.teams["delete"](t))},this.insertTeam=function(n){var r=t.defer(),s=void 0!=i.get_teams,a=void 0,o=void 0==n.team_key;return s&&(a=i.get_teams.teams,void 0==a&&(i.get_teams.teams=[],a=i.get_teams.teams)),e.execute(gapi.client.teams.insert(n)).then(function(e){if(s)if(o)a.push(e);else for(var t=0;t<a.length;t++)if(e.team_key===a[t].team_key){a[t]=e;break}r.resolve(e)},function(e){r.reject(e)}),r.promise},this.getInvites=n("get_invites",gapi.client.teams.invites.list()),this.editInvite=function(t){return e.execute(gapi.client.teams.invites.respond(t))},this.getTeams=n("get_teams",gapi.client.teams.list.all()),this.getLeadTeams=n("get_lead_teams",gapi.client.teams.list.leader()),this.getProgress=r("progress",gapi.client.teams.progress),this.getSweeps=r("sweep",gapi.client.teams.sweeps.get),this.insertSweep=function(t){return e.execute(gapi.client.teams.sweeps.insert(t))},this.deleteSweep=function(t){return e.execute(gapi.client.teams.sweeps["delete"](t))},this.getCourses=n("courses",gapi.client.teams.courses())}]);
angular.module("TeamDirectives",[]).directive("teamTitle",function(){return{restrict:"E",scope:{team:"="},templateUrl:"/static/teams/partials/components/team_title.html"}}).directive("routeLoadingIndicator",["$rootScope",function(e){return{restrict:"E",templateUrl:"/static/teams/partials/components/loading_spinner.html",link:function(t,n,r){e.$on("$routeChangeStart",function(){e.isRouteLoading=!0}),e.$on("$routeChangeSuccess",function(){e.isRouteLoading=!1})}}}]).filter("percentage",["$filter",function(e){return function(t,n){return e("number")(100*t,n)+"%"}}]).filter("pendingSweeps",function(){return function(e){var t=new Date,n=new Date(0);n.setFullYear(t.getFullYear()),n.setMonth(t.getMonth(),t.getDate());var r=t.getHours(),i=[];return angular.forEach(e,function(e){(e.dt.getTime()>n.getTime()||e.dt.getTime()===n.getTime()&&e.hourNum>r)&&i.push(e)}),i}}).filter("firedSweeps",function(){return function(e){var t=new Date,n=new Date(0);n.setFullYear(t.getFullYear()),n.setMonth(t.getMonth(),t.getDate());var r=t.getHours(),i=[];return angular.forEach(e,function(e){(e.dt.getTime()<n.getTime()||e.dt.getTime()===n.getTime()&&e.hourNum<=r)&&i.push(e)}),i}});
!function(a){"use strict";var n=a.module("angular.snackbar",[]);n.factory("snackbar",["$rootScope",function(a){return{createWithTimeout:function(n,e){a.$broadcast("createSnackbarWithTimeout",{content:n,duration:e})},create:function(n,e){a.$broadcast("createSnackbar",{content:n,id:e})},remove:function(n){a.$broadcast("removeSnackbar",{id:n})}}}]),n.directive("snackbar",["$rootScope","$compile","$timeout",function(n,e,c){return function(t,r,o){var s=a.element(r),i=o.snackbarDuration||3e3,u=o.snackbarRemoveDelay||20;n.$on("createSnackbarWithTimeout",function(n,r){var o='<div class="snackbar snackbar-opened"><span class="snackbar-content">'+r.content+"</span></div>",b=a.element(e(o)(t));s.append(b),c(function(){b.removeClass("snackbar-opened"),c(function(){b.remove()},u,!1)},r.duration||i,!1)}),n.$on("createSnackbar",function(n,c){var r='<div class="snackbar snackbar-opened snackbar-id-'+c.id+'"><span class="snackbar-content">'+c.content+"</span></div>",o=a.element(e(r)(t));s.append(o)}),n.$on("removeSnackbar",function(n,e){var c=a.element(s[0].getElementsByClassName("snackbar-id-"+e.id));c.removeClass("snackbar-opened"),c.remove()})}}])}(angular);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhc2UuanMiLCJhcHAuanMiLCJpbnZpdGVzX2NvbnRyb2xsZXJzLmpzIiwibWFuYWdlX2NvbnRyb2xsZXJzLmpzIiwibW9kYWxfY29udHJvbGxlcnMuanMiLCJvdmVydmlld19jb250cm9sbGVycy5qcyIsInRlYW1zX2NvbnRyb2xsZXJzLmpzIiwic2VydmljZXMuanMiLCJkaXJlY3RpdmVzLmpzIiwiYW5ndWxhci5zbmFja2Jhci5taW4uanMiXSwibmFtZXMiOlsiQ0xJRU5UX0lEIiwiU0NPUEVTIiwiUkVTUE9OU0VfVFlQRSIsImluaXQiLCJhcGlzVG9Mb2FkIiwiYXBpUm9vdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaG9zdCIsImluZGV4T2YiLCJjYWxsYmFjayIsImFuZ3VsYXIiLCJib290c3RyYXAiLCJkb2N1bWVudCIsImdhcGkiLCJjbGllbnQiLCJsb2FkIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwicmVzb2x2ZSIsInRlYW1zIiwiYXBpIiwiZ2V0VGVhbXMiLCJ0ZWFtIiwiJHJvdXRlIiwiZ2V0UHJvZ3Jlc3MiLCJjdXJyZW50IiwicGFyYW1zIiwiaW52aXRlcyIsImdldEludml0ZXMiLCJnZXRMZWFkVGVhbXMiLCJ1c2VyIiwib0F1dGgiLCJnZXRVc2VySW5mbyIsImNvdXJzZXMiLCJnZXRDb3Vyc2VzIiwic3dlZXBzIiwiZ2V0U3dlZXBzIiwicHJvZ3Jlc3MiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwicnVuIiwiJHJvb3RTY29wZSIsIiRsb2NhdGlvbiIsInNpZGViYXIiLCJlbGVtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInJlbW92ZUNsYXNzIiwicXVlcnlTZWxlY3RvciIsImFkZENsYXNzIiwiY2hlY2siLCJ0aGVuIiwicGF0aCIsInNob3ciLCJzZXQiLCJzbmFja2JhciIsInRoaXMiLCJwZW5kaW5nIiwiYWNjZXB0ZWQiLCJhbGxJbnZpdGVzIiwidW5kZWZpbmVkIiwiaSIsImxlbmd0aCIsInJlc3BvbnNlIiwicHVzaCIsInNlbGYiLCJlZGl0SW52aXRlIiwiaW52aXRlIiwibmV3UmVzcG9uc2UiLCJyZWZyZXNoVGVhbXMiLCJ0ZWFtX2tleSIsInNwbGljZSIsImNyZWF0ZSIsInJlbW92ZSIsImNyZWF0ZVdpdGhUaW1lb3V0IiwicGVuZGluZ1Jlc3BvbnNlcyIsImFjY2VwdGVkUmVzcG9uc2VzIiwicmVzcG9uc2VPcHRpb25zIiwiTk9UX0NIT1NFTiIsIkFMTF9NRU1CRVJTIiwiVEVBTV9MRUFERVIiLCJSRUpFQ1RfSU5WSVRFIiwiJG1vZGFsIiwiaXRlbXMiLCJ0b2dnbGVDcmVhdGVUZWFtTW9kYWwiLCJtb2RhbEluc3RhbmNlIiwib3BlbiIsImNvbnRyb2xsZXJBcyIsInJlc3VsdCIsIm5ld1RlYW0iLCJpbnNlcnRUZWFtIiwiZXJyb3IiLCIkcm91dGVQYXJhbXMiLCIkc2NvcGUiLCJ0ZWFtTnVtYmVyIiwiZ29Ub1N3ZWVwIiwib2ZmZXJlZENvdXJzZXMiLCJjb25zb2xlIiwibG9nIiwiZ2V0Q291cnNlVGl0bGUiLCJwcmVmaXgiLCJpZHMiLCJ0aXRsZXMiLCJ0aW1lc0NoYW5nZWQiLCJkZXJlZ2lzdGVyIiwiJHdhdGNoIiwib25JbnB1dE1hZGVEaXJ0eSIsImRlbGV0ZU1lbWJlciIsIm1lbWJlciIsIm1lbWJlcnMiLCJlbWFpbCIsInNhdmVUZWFtIiwidG9nZ2xlRGVsZXRlVGVhbU1vZGFsIiwiZGVsZXRlVGVhbSIsInRvZ2dsZUNyZWF0ZU1lbWJlck1vZGFsIiwibmV3RW1haWwiLCJuZXdNZW1iZXIiLCJ2aXNpYmlsaXR5IiwibmV3TWVtYmVycyIsInZpc2liaWxpdHlPcHRpb25zIiwidG9kYXkiLCJEYXRlIiwidGltZXpvbmVzIiwiZG9uZSIsInN3ZWVwIiwiaG91ck51bSIsInBhcnNlSW50IiwiaG91ciIsImR0Iiwic2V0RnVsbFllYXIiLCJ5ZWFyIiwic2V0TW9udGgiLCJtb250aCIsImRheSIsInNhdmVTd2VlcCIsInRvU3RyaW5nIiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiLCJpbnNlcnRTd2VlcCIsIm5ld1N3ZWVwIiwiZGVsZXRlU3dlZXAiLCJzd2VlcF9rZXkiLCJzdG9wRXZlbnQiLCIkZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInRvZ2dsZUltcG9ydFN3ZWVwc0RpYWxvZyIsInRlYW1Ub0ltcG9ydEZyb20iLCJuYW1lIiwiaW1wb3J0ZWRTd2VlcHMiLCJpbnNlcnRlZCIsImdldFRpbWUiLCJ0b2dnbGVTd2VlcE9wdGlvbnNNb2RhbCIsIm9wdGlvblN0cmluZyIsIm9wdGlvbnMiLCJuZXdPcHRpb25zIiwidG9nZ2xlQ3JlYXRlU3dlZXBEaWFsb2ciLCJ0b2dnbGVTaWduT3V0TW9kYWwiLCJ0b2dnbGVFZGl0UHJvZmlsZU1vZGFsIiwiJG1vZGFsSW5zdGFuY2UiLCJjYW5jZWwiLCJkaXNtaXNzIiwiJGNvbnRyb2xsZXIiLCJleHRlbmQiLCJhZGRNZW1iZXIiLCJ0cmltIiwiY2xvc2UiLCJzZWxlY3RlZFRlYW0iLCJ0ZWFtTmFtZSIsInRlYW1NZW1iZXJzIiwiaW5jbHVkZUxlYWRlciIsImNvcHkiLCJhZGQiLCJsZWFkZXIiLCJzcGxpdCIsImZ1bGxuYW1lIiwidXNlcm5hbWUiLCJoYXNUaW1lc3RhbXAiLCJwb2ludFZhbHVlIiwicG9pbnRzUGVyVW5pdCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJwb2ludHNQZXJUYXNrIiwiaW5jbHVkZUNvdXJzZVByb2dyZXNzIiwiaW5jbHVkZVRyYWNrUHJvZ3Jlc3MiLCJ0aW1lem9uZSIsImdlbmVyYXRlIiwibGFuZGluZ1FzIiwic2V0SXRlbSIsIm9uUG9zdEdlbmVyYXRlIiwiJHdpbmRvdyIsInFzIiwibGFuZGluZ1VybCIsImVuY29kZVVSSSIsImRvbmVCdXR0b25UZXh0IiwidHoiLCJhZGRTd2VlcCIsIm9wIiwidXNlckVtYWlsIiwiJGFwcGx5Iiwic2lnbnVwIiwidXNlckluZm8iLCJyb3V0ZXMiLCJnZXQiLCJ2YWx1ZSIsImlzQWN0aXZlIiwicm91dGVVcmwiLCJzdWJzdHJpbmciLCJzdGFydHNXaXRoIiwidG9nZ2xlRXhwb3J0UHJvZ3Jlc3NNb2RhbCIsIm1lbWJlcnNfcHJvZ3Jlc3MiLCJjb3Vyc2VfcHJvZ3Jlc3MiLCJjb3Vyc2UiLCJjb3Vyc2VfbmFtZSIsInRyYWNrcyIsImNvdXJzZU51bSIsImNvdXJzZVRyYWNrcyIsInRyYWNrX3Byb2dyZXNzIiwiaiIsImdldFByb2dyZXNzRm9yTWVtYmVyVHJhY2siLCJ0cmFja051bSIsInRyYWNrIiwidHJhY2tfbmFtZSIsInVuaXRzIiwidHJhY2tVbml0cyIsInVuaXRfcHJvZ3Jlc3MiLCJrIiwiZ2V0UHJvZ3Jlc3NGb3JNZW1iZXJVbml0IiwidW5pdE51bSIsImZhY3RvcnkiLCJpc1Nob3dpbmciLCJocmVmIiwic2hvd2luZyIsInNlcnZpY2UiLCIkcSIsInNpZ25pbiIsImltbWVkaWF0ZSIsInAiLCJkZWZlciIsImF1dGgiLCJhdXRob3JpemUiLCJjbGllbnRfaWQiLCJzY29wZSIsImF1dGhSZXN1bHQiLCJyZWplY3QiLCJwcm9taXNlIiwiZXhlY3V0ZSIsImFwaU1ldGhvZCIsInJlc3AiLCJjb2RlIiwib2F1dGgyIiwidXNlcmluZm8iLCJjYWNoZSIsImRlbGV0ZUNhY2hlIiwiY2FjaGVkQXBpQ2FsbCIsImNhY2hlS2V5IiwiZm9yY2VSZWZyZXNoIiwiY2FjaGVkVGVhbUFwaUNhbGwiLCJ0eXBlIiwidXBkYXRlQ2FjaGUiLCJpbnNlcnQiLCJsaXN0IiwicmVzcG9uZCIsImFsbCIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwibGluayIsImVsZW0iLCJhdHRycyIsIiRvbiIsImlzUm91dGVMb2FkaW5nIiwiZmlsdGVyIiwiJGZpbHRlciIsImlucHV0IiwiZGVjaW1hbHMiLCJub3ciLCJjb21wYXJlRGF0ZSIsImdldEhvdXJzIiwiZmlsdGVyZWQiLCJmb3JFYWNoIiwiaXRlbSIsImEiLCJuIiwiZSIsIiRicm9hZGNhc3QiLCJjb250ZW50IiwiZHVyYXRpb24iLCJpZCIsImMiLCJ0IiwiciIsIm8iLCJzIiwic25hY2tiYXJEdXJhdGlvbiIsInUiLCJzbmFja2JhclJlbW92ZURlbGF5IiwiYiIsImFwcGVuZCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiXSwibWFwcGluZ3MiOiJBQXFCQUEsVUFBWSw4RUFNWkMsT0FBUyxpREFPVEMsY0FBZ0IsaUJBUWhCQyxLQUFPLFdBQ04sR0FBSUMsR0FDQUMsRUFBVSxLQUFPQyxPQUFPQyxTQUFTQyxLQUFPLFVBRU0sTUFBOUNGLE9BQU9DLFNBQVNDLEtBQUtDLFFBQVEsZUFDaENKLEVBQVUsNENBRVgsSUFBSUssR0FBVyxXQUNNLEtBQWROLEdBRUxPLFFBQVFDLFVBQVVDLFVBQVcsWUFHL0JULEdBQWEsRUFDYlUsS0FBS0MsT0FBT0MsS0FBSyxRQUFTLEtBQU1OLEVBQVVMLEdBQzFDUyxLQUFLQyxPQUFPQyxLQUFLLFNBQVUsS0FBTU47QUN6RGxDLFlBRUFDLFNBQVFNLE9BQU8sV0FBWSxrQkFBbUIsbUJBQW9CLHNCQUF1QixvQkFDOUQsZUFBaUIsb0JBQXFCLGVBQWdCLFVBQVcsaUJBQ2pFLHFCQUMxQkMsUUFBUSxpQkFDUCxTQUFTQyxHQUNQQSxFQUNHQyxLQUFLLGNBQ0pDLFlBQWEsdUNBQ2JDLFdBQVksNkJBRWJGLEtBQUssYUFDSkMsWUFBYSxzQ0FDYkMsV0FBWSwyQkFFYkYsS0FBSyxXQUNKQyxZQUFhLG9DQUNiQyxXQUFZLHFCQUNaQyxTQUNFQyxPQUFRLE1BQU8sU0FBU0MsR0FDdEIsTUFBT0EsR0FBSUMsZ0JBSWhCTixLQUFLLDRCQUNKQyxZQUFhLDJDQUNiQyxXQUFZLDZCQUNaQyxTQUNFSSxNQUFPLE1BQU8sU0FBVSxTQUFTRixFQUFLRyxHQUNwQyxNQUFPSCxHQUFJSSxZQUFZRCxFQUFPRSxRQUFRQyxhQUkzQ1gsS0FBSyxnREFDSkMsWUFBYSwwQ0FDYkMsV0FBWSwyQkFDWkMsU0FDRUksTUFBTyxNQUFPLFNBQVUsU0FBU0YsRUFBS0csR0FDcEMsTUFBT0gsR0FBSUksWUFBWUQsRUFBT0UsUUFBUUMsYUFJM0NYLEtBQUssa0VB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RSxLQUFNOE4sRUFBRWIsSUFBSSxpQkFBaUIsU0FBU2EsRUFBRU0sR0FBRyxHQUFJRSxHQUFFLG9EQUFvREYsRUFBRUQsR0FBRyxvQ0FBb0NDLEVBQUVILFFBQVEsZ0JBQWdCTSxFQUFFVixFQUFFN08sUUFBUStPLEVBQUVPLEdBQUdELEdBQUlHLEdBQUVLLE9BQU9OLEtBQUtULEVBQUViLElBQUksaUJBQWlCLFNBQVNhLEVBQUVDLEdBQUcsR0FBSUssR0FBRVAsRUFBRTdPLFFBQVF3UCxFQUFFLEdBQUdNLHVCQUF1QixlQUFlZixFQUFFSSxJQUFLQyxHQUFFbFAsWUFBWSxtQkFBbUJrUCxFQUFFeE4sZ0JBQWdCbEUiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIENvcHlyaWdodCAyMDEzIFNmZWlyIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBDbGllbnQgSUQgb2YgdGhlIGFwcGxpY2F0aW9uIChmcm9tIHRoZSBBUElzIENvbnNvbGUpLlxuICpcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbi8vIEJlbG93IGlzIGZvciB0aGUgZGVwbG95ZWQgYW5kIGxvY2FsaG9zdC5cbkNMSUVOVF9JRCA9ICc5NjMwMDkwNjUwODctMmE1Y2NsNXJobTRnaGdtODhsaTIxZmtqZ3N1NWV1YTBAZGV2ZWxvcGVyLmdzZXJ2aWNlYWNjb3VudC5jb20nO1xuLyoqXG4gKiBTY29wZXMgdXNlZCBieSB0aGUgYXBwbGljYXRpb24uXG4gKlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuU0NPUEVTID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvdXNlcmluZm8uZW1haWwnO1xuXG4vKipcbiAqIFJlc3BvbnNlIHR5cGUgb2YgdGhlIGF1dGggdG9rZW4uXG4gKlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuUkVTUE9OU0VfVFlQRSA9ICd0b2tlbiBpZF90b2tlbic7XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIGFwcGxpY2F0aW9uLiBJdCBsb2FkcyBhc3luY2hyb25vdXNseSBhbGwgbmVlZGVkIGxpYnJhcmllc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfVxuICogICAgICAgICAgICBhcGlSb290IFJvb3Qgb2YgdGhlIEFQSSdzIHBhdGguXG4gKi9cbmluaXQgPSBmdW5jdGlvbigpIHtcblx0dmFyIGFwaXNUb0xvYWQ7XG5cdHZhciBhcGlSb290ID0gJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0ICsgJy9fYWgvYXBpJztcblx0Ly8gQ2hhbmdlIHRvIGh0dHBzIGFwcHNwb3QgZG9tYWluIGZvciBkZXBsb3ltZW50LlxuXHRpZiAod2luZG93LmxvY2F0aW9uLmhvc3QuaW5kZXhPZihcImxvY2FsaG9zdFwiKSA9PT0gLTEpIHtcblx0XHRhcGlSb290ID0gXCJodHRwczovL3Jvc2Vib3RpY3N3ZWIuYXBwc3BvdC5jb20vX2FoL2FwaVwiXG5cdH1cblx0dmFyIGNhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKC0tYXBpc1RvTG9hZCA9PSAwKSB7XG5cdFx0XHQvLyBib290c3RyYXAgbWFudWFsbHkgYW5ndWxhcmpzIGFmdGVyIG91ciBhcGkgYXJlIGxvYWRlZFxuXHRcdFx0YW5ndWxhci5ib290c3RyYXAoZG9jdW1lbnQsIFtcIlRlYW1BcHBcIl0pO1xuXHRcdH1cblx0fVxuXHRhcGlzVG9Mb2FkID0gMjsgLy8gbXVzdCBtYXRjaCBudW1iZXIgb2YgY2FsbHMgdG8gZ2FwaS5jbGllbnQubG9hZCgpXG5cdGdhcGkuY2xpZW50LmxvYWQoJ3RlYW1zJywgJ3YxJywgY2FsbGJhY2ssIGFwaVJvb3QpO1xuXHRnYXBpLmNsaWVudC5sb2FkKCdvYXV0aDInLCAndjInLCBjYWxsYmFjayk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnVGVhbUFwcCcsIFsnVGVhbUNvbnRyb2xsZXJzJywgJ01vZGFsQ29udHJvbGxlcnMnLCAnT3ZlcnZpZXdDb250cm9sbGVycycsICdNYW5hZ2VDb250cm9sbGVycycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnVGVhbVNlcnZpY2VzJywgICdJbnZpdGVDb250cm9sbGVycycsICd1aS5ib290c3RyYXAnLCAnbmdSb3V0ZScsICdUZWFtRGlyZWN0aXZlcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnYW5ndWxhci5zbmFja2JhciddKVxuLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJyxcbiAgZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIpIHtcbiAgICAkcm91dGVQcm92aWRlclxuICAgICAgLndoZW4oJy9vdmVydmlldy8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy90ZWFtcy9wYXJ0aWFscy9vdmVydmlldy5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ092ZXJ2aWV3Q3RybCBhcyBvdmVydmlldydcbiAgICAgIH0pXG4gICAgICAud2hlbignL3ByZXZpZXcvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJy9zdGF0aWMvdGVhbXMvcGFydGlhbHMvcHJldmlldy5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1ByZXZpZXdDdHJsIGFzIHByZXZpZXcnXG4gICAgICB9KVxuICAgICAgLndoZW4oJy90ZWFtcy8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy90ZWFtcy9wYXJ0aWFscy90ZWFtcy5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1RlYW1zQ3RybCBhcyB0ZWFtcycsXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICB0ZWFtczogWydhcGknLCBmdW5jdGlvbihhcGkpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGkuZ2V0VGVhbXMoKTtcbiAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLndoZW4oJy90ZWFtcy86dGVhbV9rZXkvY291cnNlcycsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3RlYW1zL3BhcnRpYWxzL3RlYW1zX2NvdXJzZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1RlYW1zQ291cnNlQ3RybCBhcyBjb3Vyc2VzJyxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIHRlYW06IFtcImFwaVwiLCBcIiRyb3V0ZVwiLCBmdW5jdGlvbihhcGksICRyb3V0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGFwaS5nZXRQcm9ncmVzcygkcm91dGUuY3VycmVudC5wYXJhbXMpO1xuICAgICAgICAgIH1dXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAud2hlbignL3RlYW1zLzp0ZWFtX2tleS9jb3Vyc2VzLzpjb3Vyc2VfbmFtZS90cmFja3MnLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy90ZWFtcy9wYXJ0aWFscy90ZWFtc190cmFjay5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1RlYW1zVHJhY2tDdHJsIGFzIHRyYWNrcycsXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICB0ZWFtOiBbXCJhcGlcIiwgXCIkcm91dGVcIiwgZnVuY3Rpb24oYXBpLCAkcm91dGUpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGkuZ2V0UHJvZ3Jlc3MoJHJvdXRlLmN1cnJlbnQucGFyYW1zKTtcbiAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLndoZW4oJy90ZWFtcy86dGVhbV9rZXkvY291cnNlcy86Y291cnNlX25hbWUvdHJhY2tzLzp0cmFja19uYW1lL3VuaXRzJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJy9zdGF0aWMvdGVhbXMvcGFydGlhbHMvdGVhbXNfdW5pdC5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1RlYW1zVW5pdEN0cmwgYXMgdW5pdHMnLFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgdGVhbTogW1wiYXBpXCIsIFwiJHJvdXRlXCIsIGZ1bmN0aW9uKGFwaSwgJHJvdXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gYXBpLmdldFByb2dyZXNzKCRyb3V0ZS5jdXJyZW50LnBhcmFtcyk7XG4gICAgICAgICAgfV1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC53aGVuKCcvaW52aXRlcy8nLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy90ZWFtcy9wYXJ0aWFscy9pbnZpdGVzLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnSW52aXRlc0N0cmwgYXMgaW52aXRlcycsXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICBpbnZpdGVzOiBbXCJhcGlcIiwgZnVuY3Rpb24oYXBpKSB7XG4gICAgICAgICAgICByZXR1cm4gYXBpLmdldEludml0ZXMoKTtcbiAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLndoZW4oJy9tYW5hZ2UvJywge1xuICAgICAgICB0ZW1wbGF0ZVVybDogJy9zdGF0aWMvdGVhbXMvcGFydGlhbHMvbWFuYWdlLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnTWFuYWdlQ3RybCBhcyBtYW5hZ2UnLFxuICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgdGVhbXM6IFtcImFwaVwiLCBmdW5jdGlvbihhcGkpIHtcbiAgICAgICAgICAgIHJldHVybiBhcGkuZ2V0TGVhZFRlYW1zKCk7XG4gICAgICAgICAgfV1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC53aGVuKCcvbWFuYWdlLzp0ZWFtX2tleScsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3RlYW1zL3BhcnRpYWxzL21hbmFnZV90ZWFtLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnTWFuYWdlVGVhbUN0cmwgYXMgbWFuYWdlJyxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIHRlYW1zOiBbXCJhcGlcIiwgZnVuY3Rpb24oYXBpKSB7XG4gICAgICAgICAgICByZXR1cm4gYXBpLmdldExlYWRUZWFtcygpO1xuICAgICAgICAgIH1dLFxuICAgICAgICAgIHVzZXI6IFtcIm9BdXRoXCIsIGZ1bmN0aW9uKG9BdXRoKSB7XG4gICAgICAgICAgICByZXR1cm4gb0F1dGguZ2V0VXNlckluZm8oKTtcbiAgICAgICAgICB9XSxcbiAgICAgICAgICBjb3Vyc2VzOiBbXCJhcGlcIiwgZnVuY3Rpb24gKGFwaSkge1xuICAgICAgICAgICAgcmV0dXJuIGFwaS5nZXRDb3Vyc2VzKCk7XG4gICAgICAgICAgfV1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC53aGVuKCcvbWFuYWdlLzp0ZWFtX2tleS9zd2VlcHMnLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy90ZWFtcy9wYXJ0aWFscy9tYW5hZ2Vfc3dlZXBzLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnU3dlZXBzVGVhbUN0cmwgYXMgc3dlZXBzJyxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgIHRlYW1zOiBbXCJhcGlcIiwgZnVuY3Rpb24oYXBpKSB7XG4gICAgICAgICAgICByZXR1cm4gYXBpLmdldExlYWRUZWFtcygpO1xuICAgICAgICAgIH1dLFxuICAgICAgICAgIHN3ZWVwczogW1wiYXBpXCIsIFwiJHJvdXRlXCIsIGZ1bmN0aW9uKGFwaSwgJHJvdXRlKSB7XG4gICAgICAgIFx0ICByZXR1cm4gYXBpLmdldFN3ZWVwcygkcm91dGUuY3VycmVudC5wYXJhbXMpO1xuICAgICAgICAgIH1dLFxuICAgICAgICAgIHByb2dyZXNzOiBbXCJhcGlcIiwgXCIkcm91dGVcIiwgZnVuY3Rpb24oYXBpLCAkcm91dGUpIHtcbiAgICAgICAgXHQgIHJldHVybiBhcGkuZ2V0UHJvZ3Jlc3MoJHJvdXRlLmN1cnJlbnQucGFyYW1zKTtcbiAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLm90aGVyd2lzZSh7XG4gICAgICAgIHJlZGlyZWN0VG86ICcvb3ZlcnZpZXcvJ1xuICAgICAgfSk7XG4gIH1dKVxuICAucnVuKFtcIiRyb290U2NvcGVcIiwgXCIkbG9jYXRpb25cIiwgXCJvQXV0aFwiLCBcInNpZGViYXJcIiwgZnVuY3Rpb24oJHJvb3RTY29wZSwgJGxvY2F0aW9uLCBvQXV0aCwgc2lkZWJhcikge1xuXHQgIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhpZGRlbi5jb250YWluZXJcIikpLnJlbW92ZUNsYXNzKFwiaGlkZGVuXCIpO1xuXHQgIGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2LnNwaW5uZXJcIikpLmFkZENsYXNzKFwiaGlkZGVuXCIpO1xuXHQgIG9BdXRoLmNoZWNrKCkudGhlbihudWxsLCBmdW5jdGlvbigpIHtcbiAgXHRcdCRsb2NhdGlvbi5wYXRoKCcvcHJldmlldycpO1xuICBcdFx0c2lkZWJhci5zaG93LnNldChmYWxzZSk7XG5cdCAgfSk7XG5cdH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdJbnZpdGVDb250cm9sbGVycycsIFtdKVxuLmNvbnRyb2xsZXIoJ0ludml0ZXNDdHJsJywgW1wiaW52aXRlc1wiLCBcImFwaVwiLCBcInNuYWNrYmFyXCIsIGZ1bmN0aW9uKGludml0ZXMsIGFwaSwgc25hY2tiYXIpIHtcblx0dGhpcy5wZW5kaW5nID0gW107XG5cdHRoaXMuYWNjZXB0ZWQgPSBbXTtcblx0dmFyIGFsbEludml0ZXMgPSBpbnZpdGVzW1wiaW52aXRlc1wiXTtcblx0aWYgKGFsbEludml0ZXMgPT0gdW5kZWZpbmVkKSB7XG5cdFx0YWxsSW52aXRlcyA9IFtdO1xuXHR9XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgYWxsSW52aXRlcy5sZW5ndGg7IGkrKykge1xuXHRcdGlmIChhbGxJbnZpdGVzW2ldLnJlc3BvbnNlID09PSBcIk5PVF9DSE9TRU5cIikge1xuXHRcdFx0dGhpcy5wZW5kaW5nLnB1c2goYWxsSW52aXRlc1tpXSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuYWNjZXB0ZWQucHVzaChhbGxJbnZpdGVzW2ldKTtcblx0XHR9XG5cdH1cblx0dmFyIHNlbGYgPSB0aGlzO1xuXHR0aGlzLmVkaXRJbnZpdGUgPSBmdW5jdGlvbihpbnZpdGUsIG5ld1Jlc3BvbnNlKSB7XG5cdFx0dmFyIHJlZnJlc2hUZWFtcyA9IGZhbHNlO1xuXHRcdGlmKGludml0ZS5yZXNwb25zZSA9PT0gXCJOT1RfQ0hPU0VOXCIgJiYgbmV3UmVzcG9uc2UgIT09IFwiTk9UX0NIT1NFTlwiKSB7XG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc2VsZi5wZW5kaW5nLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChzZWxmLnBlbmRpbmdbaV0udGVhbV9rZXkgPT09IGludml0ZS50ZWFtX2tleSkge1xuXHRcdFx0XHRcdHNlbGYucGVuZGluZy5zcGxpY2UoaSwgMSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHNlbGYuYWNjZXB0ZWQucHVzaChpbnZpdGUpO1xuXHRcdFx0cmVmcmVzaFRlYW1zID0gdHJ1ZTtcblx0XHR9XG5cdFx0aWYgKG5ld1Jlc3BvbnNlID09PSBcIlJFSkVDVF9JTlZJVEVcIikge1xuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHNlbGYuYWNjZXB0ZWQubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKHNlbGYuYWNjZXB0ZWRbaV0udGVhbV9rZXkgPT09IGludml0ZS50ZWFtX2tleSkge1xuXHRcdFx0XHRcdHNlbGYuYWNjZXB0ZWQuc3BsaWNlKGksIDEpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZWZyZXNoVGVhbXMgPSB0cnVlO1xuXHRcdH1cblx0XHRpbnZpdGUucmVzcG9uc2UgPSBuZXdSZXNwb25zZTtcblx0XHRzbmFja2Jhci5jcmVhdGUoXCJTZW5kaW5nIHJlc3BvbnNlLi4uXCIsIDQpO1xuXHRcdGFwaS5lZGl0SW52aXRlKGludml0ZSkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdHNuYWNrYmFyLnJlbW92ZSg0KTtcblx0XHRcdHNuYWNrYmFyLmNyZWF0ZVdpdGhUaW1lb3V0KFwiPGI+U3VjY2VzcyE8L2I+IFJlc3BvbnNlIHNhdmVkXCIpO1xuXHRcdFx0aWYgKHJlZnJlc2hUZWFtcykge1xuXHRcdFx0XHRhcGkuZ2V0VGVhbXModHJ1ZSk7XG5cdFx0XHR9XG5cdFx0fSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRzbmFja2Jhci5yZW1vdmUoNCk7XG5cdFx0XHRzbmFja2Jhci5jcmVhdGVXaXRoVGltZW91dChcIjxiPkVycm9yITwvYj4gUmVzcG9uc2Ugbm90IHNhdmVkXCIpO1xuXHRcdH0pO1xuXHR9XG5cdHRoaXMucGVuZGluZ1Jlc3BvbnNlcyA9IFtcIk5PVF9DSE9TRU5cIiwgXCJBTExfTUVNQkVSU1wiLCBcIlRFQU1fTEVBREVSXCIsIFwiUkVKRUNUX0lOVklURVwiXTtcblx0dGhpcy5hY2NlcHRlZFJlc3BvbnNlcyA9IFtcIkFMTF9NRU1CRVJTXCIsIFwiVEVBTV9MRUFERVJcIiwgXCJSRUpFQ1RfSU5WSVRFXCJdO1xuIFx0dGhpcy5yZXNwb25zZU9wdGlvbnMgPSB7XCJOT1RfQ0hPU0VOXCIgOiBcIk5vIHJlc3BvbnNlXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFwiQUxMX01FTUJFUlNcIiA6IFwiQWxsIG1lbWJlcnMgY2FuIHNlZSBteSBwcm9ncmVzc1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcIlRFQU1fTEVBREVSXCI6IFwiT25seSB0aGUgbGVhZGVyIGNhbiBzZWUgbXkgcHJvZ3Jlc3NcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XCJSRUpFQ1RfSU5WSVRFXCI6IFwiUmVqZWN0IGludml0ZSBhbmQgbm8gb25lIGNhbiBzZWUgbXkgcHJvZ3Jlc3NcIn07XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnTWFuYWdlQ29udHJvbGxlcnMnLCBbXSlcbi5jb250cm9sbGVyKCdNYW5hZ2VDdHJsJywgW1wiJG1vZGFsXCIsIFwidGVhbXNcIiwgXCJhcGlcIiwgXCJzbmFja2JhclwiLCBcIm9BdXRoXCIsIGZ1bmN0aW9uKCRtb2RhbCwgdGVhbXMsIGFwaSwgc25hY2tiYXIsIG9BdXRoKSB7XG5cdHRoaXMuaXRlbXMgPSB0ZWFtc1tcInRlYW1zXCJdO1xuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdHRoaXMudG9nZ2xlQ3JlYXRlVGVhbU1vZGFsID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG5cdFx0ICB0ZW1wbGF0ZVVybDogJy9zdGF0aWMvdGVhbXMvcGFydGlhbHMvbW9kYWxzL2NyZWF0ZV90ZWFtX21vZGFsLmh0bWwnLFxuXHRcdCAgY29udHJvbGxlcjogJ0NyZWF0ZVRlYW1Nb2RhbEluc3RhbmNlQ3RybCcsXG5cdFx0ICBjb250cm9sbGVyQXM6ICdtb2RhbCcsXG5cdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdHVzZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiBvQXV0aC5nZXRVc2VySW5mbygpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRjb3Vyc2VzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4gYXBpLmdldENvdXJzZXMoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24obmV3VGVhbSkge1xuXHRcdFx0c25hY2tiYXIuY3JlYXRlKFwiQ3JlYXRpbmcgdGVhbS4uLlwiLCAxKTtcblx0XHRcdGFwaS5pbnNlcnRUZWFtKG5ld1RlYW0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG5cdFx0XHRcdHNuYWNrYmFyLnJlbW92ZSgxKTtcblx0XHRcdFx0c25hY2tiYXIuY3JlYXRlV2l0aFRpbWVvdXQoXCI8Yj5TdWNjZXNzITwvYj4gVGVhbSBjcmVhdGVkXCIpO1xuXHRcdFx0XHRpZiAodGVhbXNbXCJ0ZWFtc1wiXSA9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHR0ZWFtc1tcInRlYW1zXCJdID0gW107XG5cdFx0XHRcdFx0c2VsZi5pdGVtcyA9IHRlYW1zW1widGVhbXNcIl07XG5cdFx0XHRcdH1cblx0XHRcdFx0dGVhbXNbXCJ0ZWFtc1wiXS5wdXNoKHJlc3VsdCk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRzbmFja2Jhci5yZW1vdmUoMSk7XG5cdFx0XHRcdHNuYWNrYmFyLmNyZWF0ZVdpdGhUaW1lb3V0KFwiPGI+RXJyb3IhPC9iPiBUZWFtIG5vdCBjcmVhdGVkXCIpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG59XSlcbi5jb250cm9sbGVyKCdNYW5hZ2VUZWFtQ3RybCcsIFtcIiRyb3V0ZVBhcmFtc1wiLCBcIiRtb2RhbFwiLCBcInRlYW1zXCIsIFwiJHNjb3BlXCIsIFwic25hY2tiYXJcIiwgXCJhcGlcIiwgXCIkbG9jYXRpb25cIiwgXCJ1c2VyXCIsIFwiY291cnNlc1wiLCBmdW5jdGlvbigkcm91dGVQYXJhbXMsICRtb2RhbCwgdGVhbXMsICRzY29wZSwgc25hY2tiYXIsIGFwaSwgJGxvY2F0aW9uLCB1c2VyLCBjb3Vyc2VzKSB7XG5cdHZhciBpdGVtcyA9IHRlYW1zW1widGVhbXNcIl07XG5cdHZhciB0ZWFtTnVtYmVyID0gLTE7XG5cdGZvcih2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuXHRcdGlmKGl0ZW1zW2ldLnRlYW1fa2V5ID09ICRyb3V0ZVBhcmFtcy50ZWFtX2tleSkge1xuXHRcdFx0dGhpcy50ZWFtID0gaXRlbXNbaV07XG5cdFx0XHR0ZWFtTnVtYmVyID0gaTtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXHR0aGlzLmdvVG9Td2VlcCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2NhdGlvbi5wYXRoKCRsb2NhdGlvbi5wYXRoKCkgKyBcIi9zd2VlcHNcIik7XG5cdH07XG5cdHRoaXMub2ZmZXJlZENvdXJzZXMgPSBjb3Vyc2VzO1xuXHRjb25zb2xlLmxvZyhjb3Vyc2VzKTtcblx0dGhpcy5nZXRDb3Vyc2VUaXRsZSA9IGZ1bmN0aW9uIChwcmVmaXgpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGNvdXJzZXMuaWRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAoY291cnNlcy5pZHNbaV0gPT09IHByZWZpeCkge1xuXHRcdFx0XHRyZXR1cm4gY291cnNlcy50aXRsZXNbaV07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBcIlwiO1xuXHR9XG5cdHZhciB0aW1lc0NoYW5nZWQgPSAwO1xuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdHZhciBkZXJlZ2lzdGVyID0gJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XG4gIFx0cmV0dXJuIHNlbGYudGVhbTtcblx0fSwgZnVuY3Rpb24oKXtcblx0XHR0aW1lc0NoYW5nZWQrKztcblx0XHRzZWxmLm9uSW5wdXRNYWRlRGlydHkodGltZXNDaGFuZ2VkKTtcblx0fSwgdHJ1ZSk7XG5cdHRoaXMub25JbnB1dE1hZGVEaXJ0eSA9IGZ1bmN0aW9uKHRpbWVzQ2hhbmdlZCkgIHtcblx0XHRpZih0aW1lc0NoYW5nZWQgPiAxKSB7XG5cdFx0XHRzbmFja2Jhci5jcmVhdGVXaXRoVGltZW91dChcIjxiPldhcm5pbmchPC9iPiBZb3UgbXVzdCBwcmVzcyBzdWJtaXQgdG8gc2F2ZSB5b3VyIGNoYW5nZXNcIik7XG5cdFx0XHRkZXJlZ2lzdGVyKCk7XG5cdFx0fVxuXHR9O1xuXHR0aGlzLmRlbGV0ZU1lbWJlciA9IGZ1bmN0aW9uKG1lbWJlcikge1xuXHRcdHZhciBtZW1iZXJzID0gc2VsZi50ZWFtLm1lbWJlcnM7XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IG1lbWJlcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmKG1lbWJlcnNbaV0uZW1haWwgPT0gbWVtYmVyLmVtYWlsKSB7XG5cdFx0XHRcdG1lbWJlcnMuc3BsaWNlKGksIDEpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdHRoaXMuc2F2ZVRlYW0gPSBmdW5jdGlvbigpIHtcblx0XHRzbmFja2Jhci5jcmVhdGUoXCJTYXZpbmcgdGVhbS4uLlwiLCAzKTtcblx0XHRhcGkuaW5zZXJ0VGVhbShzZWxmLnRlYW0pLnRoZW4oZnVuY3Rpb24obmV3VGVhbSkge1xuXHRcdFx0c25hY2tiYXIucmVtb3ZlKDMpO1xuXHRcdFx0c25hY2tiYXIuY3JlYXRlV2l0aFRpbWVvdXQoXCI8Yj5TdWNjZXNzITwvYj4gVGVhbSBzYXZlZFwiKTtcblx0XHR9LCBmdW5jdGlvbigpIHtcblx0XHRcdHNuYWNrYmFyLnJlbW92ZSgzKTtcblx0XHRcdHNuYWNrYmFyLmNyZWF0ZVdpdGhUaW1lb3V0KFwiPGI+RXJyb3IhPC9iPiBUZWFtIG5vdCBzYXZlZFwiKTtcblx0XHR9KTtcblx0fVxuXHR0aGlzLnRvZ2dsZURlbGV0ZVRlYW1Nb2RhbCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdCAgdGVtcGxhdGVVcmw6ICcvc3RhdGljL3RlYW1zL3BhcnRpYWxzL21vZGFscy9kZWxldGVfdGVhbV9tb2RhbC5odG1sJyxcblx0XHQgIGNvbnRyb2xsZXI6ICdEZWxldGVUZWFtTW9kYWxJbnN0YW5jZUN0cmwnLFxuXHRcdCAgY29udHJvbGxlckFzOiAnbW9kYWwnXG5cdFx0fSk7XG5cdFx0bW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdGl0ZW1zLnNwbGljZShpLCAxKTtcblx0XHRcdHNuYWNrYmFyLmNyZWF0ZShcIkRlbGV0aW5nIHRlYW0uLi5cIiwgMik7XG5cdFx0XHRhcGkuZGVsZXRlVGVhbShzZWxmLnRlYW0pLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNuYWNrYmFyLnJlbW92ZSgyKTtcblx0XHRcdFx0c25hY2tiYXIuY3JlYXRlV2l0aFRpbWVvdXQoXCI8Yj5TdWNjZXNzITwvYj4gVGVhbSBkZWxldGVkXCIpO1xuXHRcdFx0fSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNuYWNrYmFyLnJlbW92ZSgyKTtcblx0XHRcdFx0c25hY2tiYXIuY3JlYXRlV2l0aFRpbWVvdXQoXCI8Yj5FcnJvciE8L2I+IFRlYW0gbm90IGRlbGV0ZWRcIik7XG5cdFx0XHR9KTtcblx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvbWFuYWdlJyk7XG5cdFx0fSk7XG5cdH07XG5cdHRoaXMudG9nZ2xlQ3JlYXRlTWVtYmVyTW9kYWwgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcblx0XHQgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy90ZWFtcy9wYXJ0aWFscy9tb2RhbHMvY3JlYXRlX21lbWJlcl9tb2RhbC5odG1sJyxcblx0XHQgIGNvbnRyb2xsZXI6ICdOZXdNZW1iZXJNb2RhbEluc3RhbmNlQ3RybCcsXG5cdFx0ICBjb250cm9sbGVyQXM6ICdtb2RhbCdcblx0XHR9KTtcblx0XHRtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uKG5ld0VtYWlsKSB7XG5cdFx0XHR2YXIgbmV3TWVtYmVyID0ge2VtYWlsOiBuZXdFbWFpbCwgdmlzaWJpbGl0eTogXCJOT1RfQ0hPU0VOXCJ9O1xuXHRcdFx0aWYgKHNlbGYudGVhbS5tZW1iZXJzID09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRzZWxmLnRlYW0ubWVtYmVycyA9IFtdO1xuXHRcdFx0fVxuXHRcdFx0aWYgKG5ld0VtYWlsID09IHVzZXIuZW1haWwpIHtcblx0XHRcdFx0bmV3TWVtYmVyLnZpc2liaWxpdHkgPSBcIkFMTF9NRU1CRVJTXCI7XG5cdFx0XHR9XG5cdFx0XHRzZWxmLnRlYW0ubWVtYmVycy5wdXNoKG5ld01lbWJlcik7XG5cdFx0XHRzZWxmLnRlYW0ubmV3TWVtYmVycyA9IHRydWU7XG5cdFx0fSk7XG5cdH07XG5cdHRoaXMudmlzaWJpbGl0eU9wdGlvbnMgPSB7XCJOT1RfQ0hPU0VOXCIgOiBcIk5vIFJlc3BvbnNlXCIsXG5cdFx0XHRcdFx0XHRcdCAgXCJBTExfTUVNQkVSU1wiIDogXCJQcm9ncmVzcyB2aXNpYmxlIGJ5IGV2ZXJ5b25lXCIsXG5cdFx0XHRcdFx0XHRcdCAgXCJURUFNX0xFQURFUlwiOiBcIlByb2dyZXNzIHZpc2libGUgYnkgbGVhZGVyIG9ubHlcIn07XG59XSlcbi5jb250cm9sbGVyKCdTd2VlcHNUZWFtQ3RybCcsIFtcIiRyb3V0ZVBhcmFtc1wiLCBcIiRtb2RhbFwiLCBcInRlYW1zXCIsIFwic3dlZXBzXCIsIFwiJGxvY2F0aW9uXCIsIFwicHJvZ3Jlc3NcIiwgXCJzbmFja2JhclwiLCBcImFwaVwiLCBcIiRzY29wZVwiLCBmdW5jdGlvbigkcm91dGVQYXJhbXMsICRtb2RhbCwgdGVhbXMsIHN3ZWVwcywgJGxvY2F0aW9uLCBwcm9ncmVzcywgc25hY2tiYXIsIGFwaSwgJHNjb3BlKSB7XG5cdHZhciBpdGVtcyA9IHRlYW1zW1widGVhbXNcIl07XG5cdHRoaXMuc3dlZXBzID0gc3dlZXBzW1wic3dlZXBzXCJdIHx8IFtdO1xuXHR2YXIgdGVhbU51bWJlciA9IC0xO1xuXHR0aGlzLnRvZGF5ID0gbmV3IERhdGUoKTtcbiAgdGhpcy50aW1lem9uZXMgPSBbJ1VUQycsICdQRFQnLCAnTURUJywgJ0NEVCcsICdFRFQnLCAnUFNUJywgJ01TVCcsICdDU1QnLCAnRVNUJ107XG5cdHRoaXMuZG9uZSA9IGZ1bmN0aW9uKCkge1xuXHRcdCRsb2NhdGlvbi5wYXRoKFwiL21hbmFnZS9cIiArICRyb3V0ZVBhcmFtcy50ZWFtX2tleSk7XG5cdH07XG5cdGZvcih2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuXHRcdGlmKGl0ZW1zW2ldLnRlYW1fa2V5ID09ICRyb3V0ZVBhcmFtcy50ZWFtX2tleSkge1xuXHRcdFx0dGhpcy50ZWFtID0gaXRlbXNbaV07XG5cdFx0XHR0ZWFtTnVtYmVyID0gaTtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnN3ZWVwcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBzd2VlcCA9IHRoaXMuc3dlZXBzW2ldO1xuXHRcdHN3ZWVwLmhvdXJOdW0gPSBwYXJzZUludChzd2VlcC5ob3VyKTtcblx0XHR2YXIgZHQgPSBuZXcgRGF0ZSgwKTtcblx0XHRkdC5zZXRGdWxsWWVhcihzd2VlcC55ZWFyKTtcblx0XHRkdC5zZXRNb250aChwYXJzZUludChzd2VlcC5tb250aCkgLSAxLCBwYXJzZUludChzd2VlcC5kYXkpKTtcblx0XHRzd2VlcC5kdCA9IGR0O1xuXHR9XG5cdHRoaXMuc2F2ZVN3ZWVwID0gZnVuY3Rpb24oc3dlZXApIHtcblx0XHRzbmFja2Jhci5jcmVhdGUoXCJTYXZpbmcgU3dlZXAuLi5cIiwgNik7XG5cdFx0c3dlZXAuaG91ciA9IHN3ZWVwLmhvdXJOdW0udG9TdHJpbmcoKTtcblx0XHRzd2VlcC55ZWFyID0gc3dlZXAuZHQuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpO1xuXHRcdHN3ZWVwLm1vbnRoID0gKHN3ZWVwLmR0LmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpO1xuXHRcdHN3ZWVwLmRheSA9IHN3ZWVwLmR0LmdldERhdGUoKS50b1N0cmluZygpO1xuXHRcdGFwaS5pbnNlcnRTd2VlcChzd2VlcCkudGhlbihmdW5jdGlvbihuZXdTd2VlcCkge1xuXHRcdFx0c25hY2tiYXIucmVtb3ZlKDYpO1xuXHRcdFx0c25hY2tiYXIuY3JlYXRlV2l0aFRpbWVvdXQoXCI8Yj5TdWNjZXNzITwvYj4gU3dlZXAgc2F2ZWRcIik7XG5cdFx0fSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRzbmFja2Jhci5yZW1vdmUoNik7XG5cdFx0XHRzbmFja2Jhci5jcmVhdGVXaXRoVGltZW91dChcIjxiPkVycm9yITwvYj4gU3dlZXAgbm90IHNhdmVkXCIpO1xuXHRcdH0pO1xuXHR9O1xuXHR0aGlzLmRlbGV0ZVN3ZWVwID0gZnVuY3Rpb24oc3dlZXApIHtcblx0XHRzbmFja2Jhci5jcmVhdGUoXCJSZW1vdmluZyBTd2VlcC4uLlwiLCA3KTtcblx0XHRhcGkuZGVsZXRlU3dlZXAoc3dlZXApLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc2VsZi5zd2VlcHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYoc3dlZXAuc3dlZXBfa2V5ID09PSBzZWxmLnN3ZWVwc1tpXS5zd2VlcF9rZXkpIHtcblx0XHRcdFx0XHRzZWxmLnN3ZWVwcy5zcGxpY2UoaSwgMSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHNuYWNrYmFyLnJlbW92ZSg3KTtcblx0XHRcdHNuYWNrYmFyLmNyZWF0ZVdpdGhUaW1lb3V0KFwiPGI+U3VjY2VzcyE8L2I+IFN3ZWVwIHJlbW92ZWRcIik7XG5cblx0XHR9LCBmdW5jdGlvbigpIHtcblx0XHRcdHNuYWNrYmFyLnJlbW92ZSg3KTtcblx0XHRcdHNuYWNrYmFyLmNyZWF0ZVdpdGhUaW1lb3V0KFwiPGI+RXJyb3IhPC9iPiBTd2VlcCBub3QgcmVtb3ZlZFwiKTtcblx0XHR9KTtcblx0fTtcblx0dGhpcy5zdG9wRXZlbnQgPSBmdW5jdGlvbigkZXZlbnQpIHtcblx0XHQkZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHQkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdH07XG5cdHRoaXMudG9nZ2xlSW1wb3J0U3dlZXBzRGlhbG9nID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG5cdFx0XHQgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy90ZWFtcy9wYXJ0aWFscy9tb2RhbHMvaW1wb3J0X3N3ZWVwc19tb2RhbC5odG1sJyxcblx0XHRcdCAgY29udHJvbGxlcjogJ0ltcG9ydFN3ZWVwc01vZGFsSW5zdGFuY2VDdHJsJyxcblx0XHRcdCAgY29udHJvbGxlckFzOiAnbW9kYWwnLFxuXHRcdFx0ICByZXNvbHZlOiB7XG5cdFx0XHRcdCAgdGVhbXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCAgcmV0dXJuIGl0ZW1zO1xuXHRcdFx0XHQgIH1cblx0XHRcdCAgfVxuXHRcdH0pO1xuXHRcdG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24odGVhbVRvSW1wb3J0RnJvbSkge1xuXHRcdFx0Y29uc29sZS5sb2codGVhbVRvSW1wb3J0RnJvbSk7XG5cdFx0XHRzbmFja2Jhci5jcmVhdGUoXCJJbXBvcnRpbmcgZnJvbSBcIiArIHRlYW1Ub0ltcG9ydEZyb20ubmFtZSArIFwiLi4uXCIsIDEwKTtcblx0XHRcdGFwaS5nZXRTd2VlcHModGVhbVRvSW1wb3J0RnJvbSkudGhlbihmdW5jdGlvbihpbXBvcnRlZFN3ZWVwcykge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhpbXBvcnRlZFN3ZWVwcyk7XG5cdFx0XHRcdGlmICghaW1wb3J0ZWRTd2VlcHMuc3dlZXBzIHx8ICFpbXBvcnRlZFN3ZWVwcy5zd2VlcHMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0c25hY2tiYXIucmVtb3ZlKDEwKTtcblx0XHRcdFx0XHRzbmFja2Jhci5jcmVhdGVXaXRoVGltZW91dChcIjxiPkVycm9yITwvYj4gVGhlcmUgd2VyZSBubyBzd2VlcHMgdG8gaW1wb3J0XCIpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgaW1wb3J0ZWRTd2VlcHMuc3dlZXBzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0dmFyIHN3ZWVwID0gaW1wb3J0ZWRTd2VlcHMuc3dlZXBzW2ldO1xuXHRcdFx0XHRcdGRlbGV0ZSBzd2VlcC5zd2VlcF9rZXk7XG5cdFx0XHRcdFx0c3dlZXAudGVhbV9rZXkgPSBzZWxmLnRlYW0udGVhbV9rZXk7XG5cdFx0XHRcdFx0YXBpLmluc2VydFN3ZWVwKHN3ZWVwKS50aGVuKGZ1bmN0aW9uKG5ld1N3ZWVwKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhuZXdTd2VlcCk7XG5cdFx0XHRcdFx0XHRuZXdTd2VlcC5ob3VyTnVtID0gcGFyc2VJbnQobmV3U3dlZXAuaG91cik7XG5cdFx0XHRcdFx0XHR2YXIgZHQgPSBuZXcgRGF0ZSgwKTtcblx0XHRcdFx0XHRcdGR0LnNldEZ1bGxZZWFyKG5ld1N3ZWVwLnllYXIpO1xuXHRcdFx0XHRcdFx0ZHQuc2V0TW9udGgocGFyc2VJbnQobmV3U3dlZXAubW9udGgpIC0gMSwgcGFyc2VJbnQobmV3U3dlZXAuZGF5KSk7XG5cdFx0XHRcdFx0XHRuZXdTd2VlcC5kdCA9IGR0O1xuXHRcdFx0XHRcdFx0aWYgKHN3ZWVwc1tcInN3ZWVwc1wiXSA9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdFx0c3dlZXBzW1wic3dlZXBzXCJdID0gW107XG5cdFx0XHRcdFx0XHRcdHNlbGYuc3dlZXBzID0gc3dlZXBzW1wic3dlZXBzXCJdO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0dmFyIGluc2VydGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc2VsZi5zd2VlcHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0aWYoc2VsZi5zd2VlcHNbaV0uZHQuZ2V0VGltZSgpIDwgbmV3U3dlZXAuZHQuZ2V0VGltZSgpIHx8IChzZWxmLnN3ZWVwc1tpXS5kdC5nZXRUaW1lKCkgPT09IG5ld1N3ZWVwLmR0LmdldFRpbWUoKSAmJiBzZWxmLnN3ZWVwc1tpXS5ob3VyTnVtIDwgbmV3U3dlZXAuaG91ck51bSkpIHtcblx0XHRcdFx0XHRcdFx0XHRzZWxmLnN3ZWVwcy5zcGxpY2UoaSwgMCwgbmV3U3dlZXApO1xuXHRcdFx0XHRcdFx0XHRcdGluc2VydGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYoIWluc2VydGVkKSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYuc3dlZXBzLnB1c2gobmV3U3dlZXApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHNuYWNrYmFyLnJlbW92ZSgxMCk7XG5cdFx0XHRcdHNuYWNrYmFyLmNyZWF0ZVdpdGhUaW1lb3V0KFwiPGI+U3VjY2VzcyE8L2I+IFN3ZWVwcyBJbXBvcnRlZFwiKTtcblx0XHRcdH0sIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzbmFja2Jhci5yZW1vdmUoMTApO1xuXHRcdFx0XHRzbmFja2Jhci5jcmVhdGVXaXRoVGltZW91dChcIjxiPkVycm9yITwvYj4gSW1wb3J0IGZhaWxlZFwiKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cdHRoaXMudG9nZ2xlU3dlZXBPcHRpb25zTW9kYWwgPSBmdW5jdGlvbihzd2VlcCkge1xuXHRcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdFx0ICB0ZW1wbGF0ZVVybDogJy9zdGF0aWMvdGVhbXMvcGFydGlhbHMvbW9kYWxzL2V4cG9ydF9wcm9ncmVzc19tb2RhbC5odG1sJyxcblx0XHRcdCAgY29udHJvbGxlcjogJ1N3ZWVwT3B0aW9uc01vZGFsSW5zdGFuY2VDdHJsJyxcblx0XHRcdCAgY29udHJvbGxlckFzOiAnbW9kYWwnLFxuXHRcdFx0ICByZXNvbHZlOiB7XG5cdFx0XHRcdCAgdGVhbTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ICByZXR1cm4gcHJvZ3Jlc3M7XG5cdFx0XHRcdCAgfSxcblx0XHRcdFx0ICBvcHRpb25TdHJpbmc6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCAgcmV0dXJuIHN3ZWVwLm9wdGlvbnM7XG5cdFx0XHRcdCAgfVxuXHRcdFx0ICB9XG5cdFx0fSk7XG5cdFx0bW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbihuZXdPcHRpb25zKSB7XG5cdFx0XHRzd2VlcC5vcHRpb25zID0gbmV3T3B0aW9ucztcblx0XHR9KTtcblx0fTtcblx0dGhpcy50b2dnbGVDcmVhdGVTd2VlcERpYWxvZyA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdFx0ICB0ZW1wbGF0ZVVybDogJy9zdGF0aWMvdGVhbXMvcGFydGlhbHMvbW9kYWxzL2NyZWF0ZV9zd2VlcF9tb2RhbC5odG1sJyxcblx0XHRcdCAgY29udHJvbGxlcjogJ05ld1N3ZWVwTW9kYWxJbnN0YW5jZUN0cmwnLFxuXHRcdFx0ICBjb250cm9sbGVyQXM6ICdtb2RhbCcsXG5cdFx0XHQgIHJlc29sdmU6IHtcblx0XHRcdFx0ICB0ZWFtX2tleTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ICByZXR1cm4gJHJvdXRlUGFyYW1zLnRlYW1fa2V5O1xuXHRcdFx0XHQgIH0sXG5cdFx0XHRcdCAgcHJvZ3Jlc3M6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCAgcmV0dXJuIHByb2dyZXNzO1xuXHRcdFx0XHQgIH1cblx0XHRcdCAgfVxuXHRcdH0pO1xuXHRcdG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24oc3dlZXApIHtcblx0XHRcdHNuYWNrYmFyLmNyZWF0ZShcIkNyZWF0aW5nIFN3ZWVwLi4uXCIsIDgpO1xuXHRcdFx0c3dlZXAuaG91ciA9IHN3ZWVwLmhvdXJOdW0udG9TdHJpbmcoKTtcblx0XHRcdHN3ZWVwLnllYXIgPSBzd2VlcC5kdC5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7XG5cdFx0XHRzd2VlcC5tb250aCA9IChzd2VlcC5kdC5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKTtcblx0XHRcdHN3ZWVwLmRheSA9IHN3ZWVwLmR0LmdldERhdGUoKS50b1N0cmluZygpO1xuXHRcdFx0YXBpLmluc2VydFN3ZWVwKHN3ZWVwKS50aGVuKGZ1bmN0aW9uKG5ld1N3ZWVwKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKG5ld1N3ZWVwKTtcblx0XHRcdFx0bmV3U3dlZXAuaG91ck51bSA9IHBhcnNlSW50KG5ld1N3ZWVwLmhvdXIpO1xuXHRcdFx0XHR2YXIgZHQgPSBuZXcgRGF0ZSgwKTtcblx0XHRcdFx0ZHQuc2V0RnVsbFllYXIobmV3U3dlZXAueWVhcik7XG5cdFx0XHRcdGR0LnNldE1vbnRoKHBhcnNlSW50KG5ld1N3ZWVwLm1vbnRoKSAtIDEsIHBhcnNlSW50KG5ld1N3ZWVwLmRheSkpO1xuXHRcdFx0XHRuZXdTd2VlcC5kdCA9IGR0O1xuXHRcdFx0XHRpZiAoc3dlZXBzW1wic3dlZXBzXCJdID09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHN3ZWVwc1tcInN3ZWVwc1wiXSA9IFtdO1xuXHRcdFx0XHRcdHNlbGYuc3dlZXBzID0gc3dlZXBzW1wic3dlZXBzXCJdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHZhciBpbnNlcnRlZCA9IGZhbHNlO1xuXHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc2VsZi5zd2VlcHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRpZihzZWxmLnN3ZWVwc1tpXS5kdC5nZXRUaW1lKCkgPCBuZXdTd2VlcC5kdC5nZXRUaW1lKCkgfHwgKHNlbGYuc3dlZXBzW2ldLmR0LmdldFRpbWUoKSA9PT0gbmV3U3dlZXAuZHQuZ2V0VGltZSgpICYmIHNlbGYuc3dlZXBzW2ldLmhvdXJOdW0gPCBuZXdTd2VlcC5ob3VyTnVtKSkge1xuXHRcdFx0XHRcdFx0c2VsZi5zd2VlcHMuc3BsaWNlKGksIDAsIG5ld1N3ZWVwKTtcblx0XHRcdFx0XHRcdGluc2VydGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZighaW5zZXJ0ZWQpIHtcblx0XHRcdFx0XHRzZWxmLnN3ZWVwcy5wdXNoKG5ld1N3ZWVwKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzbmFja2Jhci5yZW1vdmUoOCk7XG5cdFx0XHRcdHNuYWNrYmFyLmNyZWF0ZVdpdGhUaW1lb3V0KFwiPGI+U3VjY2VzcyE8L2I+IFN3ZWVwIGNyZWF0ZWRcIik7XG5cdFx0XHR9LCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c25hY2tiYXIucmVtb3ZlKDgpO1xuXHRcdFx0XHRzbmFja2Jhci5jcmVhdGVXaXRoVGltZW91dChcIjxiPkVycm9yITwvYj4gU3dlZXAgbm90IGNyZWF0ZWRcIik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdNb2RhbENvbnRyb2xsZXJzJywgW10pXG4uY29udHJvbGxlcignTW9kYWxUb2dnbGVDdHJsJywgW1wiJG1vZGFsXCIsIGZ1bmN0aW9uKCRtb2RhbCkge1xuXHR0aGlzLnRvZ2dsZVNpZ25PdXRNb2RhbCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdCAgdGVtcGxhdGVVcmw6ICdsb2dvdXRfbW9kYWwuaHRtbCcsXG5cdFx0ICBjb250cm9sbGVyOiAnU2ltcGxlTW9kYWxJbnN0YW5jZUN0cmwnLFxuXHRcdCAgY29udHJvbGxlckFzOiAnbW9kYWwnXG5cdFx0fSk7XG5cdH07XG5cdHRoaXMudG9nZ2xlRWRpdFByb2ZpbGVNb2RhbCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdCAgdGVtcGxhdGVVcmw6ICdlZGl0X3Byb2ZpbGVfbW9kYWwuaHRtbCcsXG5cdFx0ICBjb250cm9sbGVyOiAnU2ltcGxlTW9kYWxJbnN0YW5jZUN0cmwnLFxuXHRcdCAgY29udHJvbGxlckFzOiAnbW9kYWwnXG5cdFx0fSk7XG5cdH07XG59XSlcbi5jb250cm9sbGVyKCdTaW1wbGVNb2RhbEluc3RhbmNlQ3RybCcsIFtcIiRtb2RhbEluc3RhbmNlXCIsIGZ1bmN0aW9uICgkbW9kYWxJbnN0YW5jZSkge1xuICB0aGlzLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgICRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuICB9O1xufV0pXG4uY29udHJvbGxlcignTmV3TWVtYmVyTW9kYWxJbnN0YW5jZUN0cmwnLCBbXCIkbW9kYWxJbnN0YW5jZVwiLCBcIiRjb250cm9sbGVyXCIsIGZ1bmN0aW9uICgkbW9kYWxJbnN0YW5jZSwgJGNvbnRyb2xsZXIpIHtcblx0YW5ndWxhci5leHRlbmQodGhpcywgJGNvbnRyb2xsZXIoJ1NpbXBsZU1vZGFsSW5zdGFuY2VDdHJsJywgeyRtb2RhbEluc3RhbmNlOiAkbW9kYWxJbnN0YW5jZX0pKTtcblx0dGhpcy5lbWFpbCA9IFwiXCI7XG5cdHRoaXMuYWRkTWVtYmVyID0gZnVuY3Rpb24oZW1haWwpIHtcblx0XHRlbWFpbCA9IGVtYWlsLnRyaW0oKTtcblx0XHRpZiAoZW1haWwubGVuZ3RoID09PSAwKSB7XG5cdFx0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKGVtYWlsLmluZGV4T2YoJ0AnKSA8IDApIHtcblx0XHRcdGVtYWlsICs9ICdAZ21haWwuY29tJztcblx0XHR9XG5cdCAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoZW1haWwpO1xuXHR9O1xufV0pXG4uY29udHJvbGxlcignRGVsZXRlVGVhbU1vZGFsSW5zdGFuY2VDdHJsJywgW1wiJG1vZGFsSW5zdGFuY2VcIiwgXCIkY29udHJvbGxlclwiLCBmdW5jdGlvbiAoJG1vZGFsSW5zdGFuY2UsICRjb250cm9sbGVyKSB7XG5cdGFuZ3VsYXIuZXh0ZW5kKHRoaXMsICRjb250cm9sbGVyKCdTaW1wbGVNb2RhbEluc3RhbmNlQ3RybCcsIHskbW9kYWxJbnN0YW5jZTogJG1vZGFsSW5zdGFuY2V9KSk7XG5cdHRoaXMucmVtb3ZlID0gZnVuY3Rpb24oKSB7XG5cdCAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcblx0fTtcbn1dKVxuLmNvbnRyb2xsZXIoJ0ltcG9ydFN3ZWVwc01vZGFsSW5zdGFuY2VDdHJsJywgW1wiJG1vZGFsSW5zdGFuY2VcIiwgXCIkY29udHJvbGxlclwiLCBcInRlYW1zXCIsIGZ1bmN0aW9uICgkbW9kYWxJbnN0YW5jZSwgJGNvbnRyb2xsZXIsIHRlYW1zKSB7XG5cdGFuZ3VsYXIuZXh0ZW5kKHRoaXMsICRjb250cm9sbGVyKCdTaW1wbGVNb2RhbEluc3RhbmNlQ3RybCcsIHskbW9kYWxJbnN0YW5jZTogJG1vZGFsSW5zdGFuY2V9KSk7XG5cdHRoaXMudGVhbXMgPSB0ZWFtcztcblx0dGhpcy5zZWxlY3RlZFRlYW0gPSB0ZWFtc1swXTtcblx0dGhpcy5pbXBvcnQgPSBmdW5jdGlvbigpIHtcblx0ICAkbW9kYWxJbnN0YW5jZS5jbG9zZSh0aGlzLnNlbGVjdGVkVGVhbSk7XG5cdH07XG59XSlcbi5jb250cm9sbGVyKCdDcmVhdGVUZWFtTW9kYWxJbnN0YW5jZUN0cmwnLCBbXCIkbW9kYWxJbnN0YW5jZVwiLCBcIiRjb250cm9sbGVyXCIsIFwidXNlclwiLCBcImNvdXJzZXNcIiwgZnVuY3Rpb24gKCRtb2RhbEluc3RhbmNlLCAkY29udHJvbGxlciwgdXNlciwgY291cnNlcykge1xuXHRhbmd1bGFyLmV4dGVuZCh0aGlzLCAkY29udHJvbGxlcignU2ltcGxlTW9kYWxJbnN0YW5jZUN0cmwnLCB7JG1vZGFsSW5zdGFuY2U6ICRtb2RhbEluc3RhbmNlfSkpO1xuXHR0aGlzLnRlYW1OYW1lID0gXCJcIjtcblx0dGhpcy50ZWFtTWVtYmVycyA9IFwiXCI7XG5cdHRoaXMuaW5jbHVkZUxlYWRlciA9IGZhbHNlO1xuXHR2YXIgc2VsZiA9IHRoaXM7XG5cdHRoaXMuY291cnNlcyA9IGFuZ3VsYXIuY29weShjb3Vyc2VzLmlkcyk7XG5cdHRoaXMub2ZmZXJlZENvdXJzZXMgPSBjb3Vyc2VzO1xuXHR0aGlzLmdldENvdXJzZVRpdGxlID0gZnVuY3Rpb24ocHJlZml4KSB7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjb3Vyc2VzLmlkcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKGNvdXJzZXMuaWRzW2ldID09PSBwcmVmaXgpIHtcblx0XHRcdFx0cmV0dXJuIGNvdXJzZXMudGl0bGVzW2ldO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gXCJcIjtcblx0fTtcblx0dGhpcy5hZGQgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmV3VGVhbSA9IHtuYW1lOiBzZWxmLnRlYW1OYW1lLCBsZWFkZXI6IHVzZXIuZW1haWwsIG1lbWJlcnM6W10sIGNvdXJzZXM6c2VsZi5jb3Vyc2VzfTtcblx0XHR2YXIgbWVtYmVycyA9IHNlbGYudGVhbU1lbWJlcnMuc3BsaXQoJywnKTtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1lbWJlcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBlbWFpbCA9IG1lbWJlcnNbaV0udHJpbSgpO1xuXHRcdFx0aWYgKGVtYWlsLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdGlmIChlbWFpbC5pbmRleE9mKCdAJykgPCAwKSB7XG5cdFx0XHRcdGVtYWlsICs9ICdAZ21haWwuY29tJztcblx0XHRcdH1cblx0XHRcdG5ld1RlYW0ubWVtYmVycy5wdXNoKHtlbWFpbDplbWFpbCwgdmlzaWJpbGl0eTpcIk5PVF9DSE9TRU5cIn0pO1xuXHRcdH1cblx0XHRpZiAoc2VsZi5pbmNsdWRlTGVhZGVyKSB7XG5cdFx0XHRuZXdUZWFtLm1lbWJlcnMucHVzaCh7ZW1haWw6dXNlci5lbWFpbCwgdmlzaWJpbGl0eTpcIkFMTF9NRU1CRVJTXCJ9KTtcblx0XHR9XG5cdCAgJG1vZGFsSW5zdGFuY2UuY2xvc2UobmV3VGVhbSk7XG5cdH07XG59XSlcbi5jb250cm9sbGVyKCdFeHBvcnRNb2RhbFBhcmVudEN0cmwnLCBbXCIkbW9kYWxJbnN0YW5jZVwiLCBcIiRjb250cm9sbGVyXCIsIFwidGVhbVwiLCBcIiR3aW5kb3dcIiwgZnVuY3Rpb24gKCRtb2RhbEluc3RhbmNlLCAkY29udHJvbGxlciwgdGVhbSkge1xuXHRhbmd1bGFyLmV4dGVuZCh0aGlzLCAkY29udHJvbGxlcignU2ltcGxlTW9kYWxJbnN0YW5jZUN0cmwnLCB7JG1vZGFsSW5zdGFuY2U6ICRtb2RhbEluc3RhbmNlfSkpO1xuXHR0aGlzLnRlYW0gPSB0ZWFtO1xuXHR0aGlzLmZ1bGxuYW1lID0gdHJ1ZTtcblx0dGhpcy51c2VybmFtZSA9IHRydWU7XG5cdHRoaXMuaGFzVGltZXN0YW1wID0gdHJ1ZTtcblx0dGhpcy5wb2ludFZhbHVlID0gXCJwb2ludHNcIjtcblx0dGhpcy5wb2ludHNQZXJVbml0ID0gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJwcHVcIikpIHx8IDE7XG5cdHRoaXMucG9pbnRzUGVyVGFzayA9IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicHB0XCIpKSB8fCAxO1xuXHR0aGlzLmluY2x1ZGVDb3Vyc2VQcm9ncmVzcyA9IGZhbHNlO1xuXHR0aGlzLmluY2x1ZGVUcmFja1Byb2dyZXNzID0gZmFsc2U7XG5cdHRoaXMudGltZXpvbmUgPSAnRVNUJztcbiAgdGhpcy50aW1lem9uZXMgPSBbJ1VUQycsICdQRFQnLCAnTURUJywgJ0NEVCcsICdFRFQnLCAnUFNUJywgJ01TVCcsICdDU1QnLCAnRVNUJ107XG5cdHZhciBzZWxmID0gdGhpcztcblx0dGhpcy5nZW5lcmF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBsYW5kaW5nUXMgPSBcInRlYW1fdXJsc2FmZT1cIiArIHRlYW0udGVhbV9rZXk7XG5cdFx0aWYodGhpcy5mdWxsbmFtZSkge1xuXHRcdFx0bGFuZGluZ1FzICs9IFwiJnN0dWRlbnRfbmFtZT10cnVlXCI7XG5cdFx0fVxuXHRcdGlmKHRoaXMudXNlcm5hbWUpIHtcblx0XHRcdGxhbmRpbmdRcyArPSBcIiZyb3NlX3VzZXJuYW1lPXRydWVcIjtcblx0XHR9XG5cdFx0aWYodGhpcy5oYXNUaW1lc3RhbXApIHtcblx0XHRcdGxhbmRpbmdRcyArPSBcIiZ0aW1lem9uZT1cIiArIHRoaXMudGltZXpvbmU7XG5cdFx0fVxuXHRcdGlmKHRoaXMuaW5jbHVkZUNvdXJzZVByb2dyZXNzKSB7XG5cdFx0XHRsYW5kaW5nUXMgKz0gXCImY291cnNlX3Byb2dyZXNzPXRydWVcIjtcblx0XHR9XG5cdFx0aWYodGhpcy5pbmNsdWRlVHJhY2tQcm9ncmVzcykge1xuXHRcdFx0bGFuZGluZ1FzICs9IFwiJnRyYWNrX3Byb2dyZXNzPXRydWVcIjtcblx0XHR9XG5cdFx0aWYodGhpcy5wb2ludFZhbHVlID09PSBcInBvaW50c1wiKSB7XG5cdFx0XHRsYW5kaW5nUXMgKz0gXCImcHB1PVwiICsgdGhpcy5wb2ludHNQZXJVbml0O1xuXHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcHVcIiwgdGhpcy5wb2ludHNQZXJVbml0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bGFuZGluZ1FzICs9IFwiJnBwdD1cIiArIHRoaXMucG9pbnRzUGVyVGFzaztcblx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicHB0XCIsIHRoaXMucG9pbnRzUGVyVGFzayk7XG5cdFx0fVxuXHRcdHRoaXMub25Qb3N0R2VuZXJhdGUobGFuZGluZ1FzKTtcblx0fTtcbn1dKVxuLmNvbnRyb2xsZXIoJ0V4cG9ydE1vZGFsSW5zdGFuY2VDdHJsJywgW1wiJG1vZGFsSW5zdGFuY2VcIiwgXCIkY29udHJvbGxlclwiLCBcInRlYW1cIiwgXCIkd2luZG93XCIsIGZ1bmN0aW9uICgkbW9kYWxJbnN0YW5jZSwgJGNvbnRyb2xsZXIsIHRlYW0sICR3aW5kb3cpIHtcblx0YW5ndWxhci5leHRlbmQodGhpcywgJGNvbnRyb2xsZXIoJ0V4cG9ydE1vZGFsUGFyZW50Q3RybCcsIHskbW9kYWxJbnN0YW5jZTokbW9kYWxJbnN0YW5jZSwgJGNvbnRyb2xsZXI6JGNvbnRyb2xsZXIsIHRlYW06dGVhbX0pKTtcblx0dGhpcy5vblBvc3RHZW5lcmF0ZSA9IGZ1bmN0aW9uKHFzKSB7XG5cdFx0dmFyIGxhbmRpbmdVcmwgPSBcImh0dHA6Ly9cIiArICR3aW5kb3cubG9jYXRpb24uaG9zdCArIFwiL3RlYW1zL2V4cG9ydC5jc3Y/XCI7XG5cdFx0JHdpbmRvdy5vcGVuKGxhbmRpbmdVcmwgKyBlbmNvZGVVUkkocXMpLCBcIl9ibGFua1wiKTtcblx0XHQkbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xuXHR9XG5cdHRoaXMuZG9uZUJ1dHRvblRleHQgPSAnR2VuZXJhdGUnO1xufV0pXG4uY29udHJvbGxlcignTmV3U3dlZXBNb2RhbEluc3RhbmNlQ3RybCcsIFtcIiRtb2RhbEluc3RhbmNlXCIsIFwiJGNvbnRyb2xsZXJcIiwgXCJ0ZWFtX2tleVwiLCBcIiRtb2RhbFwiLCBcInByb2dyZXNzXCIsICBmdW5jdGlvbiAoJG1vZGFsSW5zdGFuY2UsICRjb250cm9sbGVyLCB0ZWFtX2tleSwgJG1vZGFsLCBwcm9ncmVzcykge1xuXHRhbmd1bGFyLmV4dGVuZCh0aGlzLCAkY29udHJvbGxlcignU2ltcGxlTW9kYWxJbnN0YW5jZUN0cmwnLCB7JG1vZGFsSW5zdGFuY2U6ICRtb2RhbEluc3RhbmNlfSkpO1xuXHR0aGlzLnN3ZWVwID0ge2R0Om5ldyBEYXRlKCksIHRlYW1fa2V5OnRlYW1fa2V5LCBvcHRpb25zOlwiXCIsIGhvdXJOdW06MTIsIHR6OlwiRVNUXCJ9O1xuICB0aGlzLnRpbWV6b25lcyA9IFsnVVRDJywgJ1BEVCcsICdNRFQnLCAnQ0RUJywgJ0VEVCcsICdQU1QnLCAnTVNUJywgJ0NTVCcsICdFU1QnXTtcblx0dGhpcy50b2RheSA9IG5ldyBEYXRlKCk7XG5cdHRoaXMuc3RvcEV2ZW50ID0gZnVuY3Rpb24oJGV2ZW50KSB7XG5cdFx0JGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0JGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHR9O1xuXHR0aGlzLmFkZFN3ZWVwID0gZnVuY3Rpb24oKSB7XG5cdCAgJG1vZGFsSW5zdGFuY2UuY2xvc2UodGhpcy5zd2VlcCk7XG5cdH07XG5cdHZhciBzZWxmID0gdGhpcztcblx0dGhpcy50b2dnbGVTd2VlcE9wdGlvbnNNb2RhbCA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdFx0ICB0ZW1wbGF0ZVVybDogJy9zdGF0aWMvdGVhbXMvcGFydGlhbHMvbW9kYWxzL2V4cG9ydF9wcm9ncmVzc19tb2RhbC5odG1sJyxcblx0XHRcdCAgY29udHJvbGxlcjogJ1N3ZWVwT3B0aW9uc01vZGFsSW5zdGFuY2VDdHJsJyxcblx0XHRcdCAgY29udHJvbGxlckFzOiAnbW9kYWwnLFxuXHRcdFx0ICByZXNvbHZlOiB7XG5cdFx0XHRcdCAgdGVhbTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ICByZXR1cm4gcHJvZ3Jlc3M7XG5cdFx0XHRcdCAgfSxcblx0XHRcdFx0ICBvcHRpb25TdHJpbmc6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCAgcmV0dXJuIHNlbGYuc3dlZXAub3B0aW9ucztcblx0XHRcdFx0ICB9XG5cdFx0XHQgIH1cblx0XHR9KTtcblx0XHRtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uKG5ld09wdGlvbnMpIHtcblx0XHRcdHNlbGYuc3dlZXAub3B0aW9ucyA9IG5ld09wdGlvbnM7XG5cdFx0fSk7XG5cdH07XG59XSlcbi5jb250cm9sbGVyKCdTd2VlcE9wdGlvbnNNb2RhbEluc3RhbmNlQ3RybCcsIFtcIiRtb2RhbEluc3RhbmNlXCIsIFwiJGNvbnRyb2xsZXJcIiwgXCJ0ZWFtXCIsIFwib3B0aW9uU3RyaW5nXCIsIGZ1bmN0aW9uICgkbW9kYWxJbnN0YW5jZSwgJGNvbnRyb2xsZXIsIHRlYW0sIG9wdGlvblN0cmluZykge1xuXHRhbmd1bGFyLmV4dGVuZCh0aGlzLCAkY29udHJvbGxlcignRXhwb3J0TW9kYWxQYXJlbnRDdHJsJywgeyRtb2RhbEluc3RhbmNlOiRtb2RhbEluc3RhbmNlLCAkY29udHJvbGxlcjokY29udHJvbGxlciwgdGVhbTp0ZWFtfSkpO1xuXHR0aGlzLm9uUG9zdEdlbmVyYXRlID0gZnVuY3Rpb24ocXMpIHtcblx0XHQkbW9kYWxJbnN0YW5jZS5jbG9zZShxcyk7XG5cdH1cblx0dGhpcy5kb25lQnV0dG9uVGV4dCA9ICdEb25lJztcblx0aWYgKG9wdGlvblN0cmluZyAhPT0gXCJcIikge1xuXHRcdHZhciBvcHRpb25zID0ge307XG5cdFx0b3B0aW9uU3RyaW5nID0gb3B0aW9uU3RyaW5nLnNwbGl0KCcmJyk7XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IG9wdGlvblN0cmluZy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIG9wID0gb3B0aW9uU3RyaW5nW2ldLnNwbGl0KCc9Jyk7XG5cdFx0XHRvcHRpb25zW29wWzBdXSA9IG9wWzFdO1xuXHRcdH1cblx0XHR0aGlzLmZ1bGxuYW1lID0gb3B0aW9uc1snc3R1ZGVudF9uYW1lJ10gPT09ICd0cnVlJztcblx0XHR0aGlzLnVzZXJuYW1lID0gb3B0aW9uc1sncm9zZV91c2VybmFtZSddID09PSAndHJ1ZSc7XG5cdFx0dGhpcy5oYXNUaW1lc3RhbXAgPSBvcHRpb25zWyd0aW1lem9uZSddICE9IHVuZGVmaW5lZDtcblx0XHR0aGlzLnBvaW50VmFsdWUgPSBvcHRpb25zWydwcHUnXSA/IFwicG9pbnRzXCIgOiBcInRhc2tzXCI7XG5cdFx0dGhpcy5wb2ludHNQZXJVbml0ID0gcGFyc2VJbnQob3B0aW9uc1sncHB1J10pIHx8IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicHB1XCIpKSB8fCAxO1xuXHRcdHRoaXMucG9pbnRzUGVyVGFzayA9IHBhcnNlSW50KG9wdGlvbnNbJ3BwdCddKSB8fCBwYXJzZUludChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInBwdFwiKSkgfHwgMTtcblx0XHR0aGlzLmluY2x1ZGVDb3Vyc2VQcm9ncmVzcyA9IG9wdGlvbnNbJ2NvdXJzZV9wcm9ncmVzcyddID09PSAndHJ1ZSc7XG5cdFx0dGhpcy5pbmNsdWRlVHJhY2tQcm9ncmVzcyA9IG9wdGlvbnNbJ3RyYWNrX3Byb2dyZXNzJ10gPT09ICd0cnVlJztcblx0XHR0aGlzLnRpbWV6b25lID0gb3B0aW9uc1sndGltZXpvbmUnXSB8fCAnRVNUJztcbiAgICB0aGlzLnRpbWV6b25lcyA9IFsnVVRDJywgJ1BEVCcsICdNRFQnLCAnQ0RUJywgJ0VEVCcsICdQU1QnLCAnTVNUJywgJ0NTVCcsICdFU1QnXTtcblx0fVxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ092ZXJ2aWV3Q29udHJvbGxlcnMnLCBbXSlcbi5jb250cm9sbGVyKCdPdmVydmlld0N0cmwnLCBmdW5jdGlvbigpIHtcbn0pXG4uY29udHJvbGxlcignUHJldmlld0N0cmwnLCBbXCJvQXV0aFwiLCBcIiRsb2NhdGlvblwiLCBcInNpZGViYXJcIiwgXCIkcm9vdFNjb3BlXCIsIFwic25hY2tiYXJcIiwgXCJ1c2VyRW1haWxcIiwgZnVuY3Rpb24ob0F1dGgsICRsb2NhdGlvbiwgc2lkZWJhciwgJHJvb3RTY29wZSwgc25hY2tiYXIsIHVzZXJFbWFpbCkge1xuXHRvQXV0aC5jaGVjaygpLnRoZW4oZnVuY3Rpb24oKSB7XG5cdFx0JGxvY2F0aW9uLnBhdGgoJy9vdmVydmlldycpO1xuXHRcdHNpZGViYXIuc2hvdy5zZXQodHJ1ZSk7XG5cdFx0JHJvb3RTY29wZS4kYXBwbHkoKTtcblx0fSk7XG5cdHRoaXMuc2lnbnVwID0gZnVuY3Rpb24oKSB7XG5cdFx0b0F1dGguc2lnbnVwKCkudGhlbihmdW5jdGlvbigpIHtcblx0XHRcdG9BdXRoLmdldFVzZXJJbmZvKCkudGhlbihmdW5jdGlvbih1c2VySW5mbykge1xuXHRcdFx0XHRpZih1c2VySW5mby5lbWFpbCAhPT0gdXNlckVtYWlsKSB7XG5cdFx0XHRcdFx0c25hY2tiYXIuY3JlYXRlV2l0aFRpbWVvdXQoXCI8Yj5EYW5nZXIhPC9iPiBTaWduaW5nIHVwIGZvciB0ZWFtcyB3aXRoIGFub3RoZXIgYWNjb3VudCBtYXkgY2F1c2UgZXJyb3JzIVwiLCA2MDAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHQkbG9jYXRpb24ucGF0aCgnL292ZXJ2aWV3Jyk7XG5cdFx0XHRzaWRlYmFyLnNob3cuc2V0KHRydWUpO1xuXHRcdH0sIGZ1bmN0aW9uKCkge1xuXHRcdFx0c25hY2tiYXIuY3JlYXRlV2l0aFRpbWVvdXQoXCI8Yj5FcnJvciE8L2I+IFNpZ24gdXAgZmFpbGVkXCIpO1xuXHRcdH0pO1xuXHR9O1xufV0pXG4uY29udHJvbGxlcignU2lkZWJhckN0cmwnLCBbXCJzaWRlYmFyXCIsIFwiJGxvY2F0aW9uXCIsIFwiJHNjb3BlXCIsIGZ1bmN0aW9uKHNpZGViYXIsICRsb2NhdGlvbiwgJHNjb3BlKSB7XG5cdHRoaXMucm91dGVzID0gc2lkZWJhci5yb3V0ZXM7XG5cdHRoaXMuc2hvdyA9IHNpZGViYXIuc2hvdy5nZXQoKTtcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHQkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNpZGViYXIuc2hvdy5nZXQoKTsgfSxcblx0XHRcdGZ1bmN0aW9uICh2YWx1ZSkgeyBzZWxmLnNob3cgPSB2YWx1ZTsgfSk7XG5cblx0dGhpcy5pc0FjdGl2ZSA9IGZ1bmN0aW9uKHJvdXRlVXJsKSB7XG5cdFx0dmFyIHBhdGggPSAkbG9jYXRpb24ucGF0aCgpO1xuXHRcdHJvdXRlVXJsID0gcm91dGVVcmwuc3Vic3RyaW5nKDEpO1xuXHRcdHJldHVybiBwYXRoLnN0YXJ0c1dpdGgocm91dGVVcmwpO1xuXHR9XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnVGVhbUNvbnRyb2xsZXJzJywgW10pXG4uY29udHJvbGxlcignVGVhbXNDdHJsJywgW1wiJG1vZGFsXCIsIFwidGVhbXNcIiwgZnVuY3Rpb24oJG1vZGFsLCB0ZWFtcykge1xuXHR0aGlzLml0ZW1zID0gdGVhbXNbXCJ0ZWFtc1wiXTtcblx0dmFyIHNlbGYgPSB0aGlzO1xufV0pXG4uY29udHJvbGxlcignVGVhbXNQYXJlbnRDdHJsJywgWyckbW9kYWwnLCAndGVhbScsIGZ1bmN0aW9uKCRtb2RhbCwgdGVhbSkge1xuXHR0aGlzLnRvZ2dsZUV4cG9ydFByb2dyZXNzTW9kYWwgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcblx0XHQgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy90ZWFtcy9wYXJ0aWFscy9tb2RhbHMvZXhwb3J0X3Byb2dyZXNzX21vZGFsLmh0bWwnLFxuXHRcdCAgY29udHJvbGxlcjogJ0V4cG9ydE1vZGFsSW5zdGFuY2VDdHJsJyxcblx0XHQgIGNvbnRyb2xsZXJBczogJ21vZGFsJyxcblx0XHQgIHJlc29sdmU6IHtcblx0XHRcdCAgdGVhbTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCAgcmV0dXJuIHRlYW07XG5cdFx0XHQgIH1cblx0XHQgIH1cblx0XHR9KTtcblx0fTtcbn1dKVxuLmNvbnRyb2xsZXIoJ1RlYW1zQ291cnNlQ3RybCcsIFtcIiRtb2RhbFwiLCBcInRlYW1cIiwgXCIkY29udHJvbGxlclwiLCBmdW5jdGlvbigkbW9kYWwsIHRlYW0sICRjb250cm9sbGVyKSB7XG5cdGFuZ3VsYXIuZXh0ZW5kKHRoaXMsICRjb250cm9sbGVyKCdUZWFtc1BhcmVudEN0cmwnLCB7JG1vZGFsOiAkbW9kYWwsIHRlYW06IHRlYW19KSk7XG4gIHRoaXMudGVhbSA9IHRlYW07XG5cdGlmICh0ZWFtLm1lbWJlcnNfcHJvZ3Jlc3MgPT0gdW5kZWZpbmVkKSB7XG5cdFx0dGhpcy50ZWFtLm1lbWJlcnNfcHJvZ3Jlc3MgPSBbXTtcblx0fVxuXHR0aGlzLmNvdXJzZXMgPSBbXTtcblx0aWYgKHRlYW0ubWVtYmVyc19wcm9ncmVzcy5sZW5ndGggPiAwKSB7XG5cdFx0Y291cnNlcyA9IHRlYW0ubWVtYmVyc19wcm9ncmVzc1swXS5jb3Vyc2VfcHJvZ3Jlc3M7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjb3Vyc2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR0aGlzLmNvdXJzZXMucHVzaChjb3Vyc2VzW2ldLm5hbWUpO1xuXHRcdH1cblx0fVxufV0pXG4uY29udHJvbGxlcignVGVhbXNUcmFja0N0cmwnLCBbXCIkcm91dGVQYXJhbXNcIiwgXCJ0ZWFtXCIsIFwiJG1vZGFsXCIsIFwiJGNvbnRyb2xsZXJcIiwgZnVuY3Rpb24oJHJvdXRlUGFyYW1zLCB0ZWFtLCAkbW9kYWwsICRjb250cm9sbGVyKSB7XG5cdGFuZ3VsYXIuZXh0ZW5kKHRoaXMsICRjb250cm9sbGVyKCdUZWFtc1BhcmVudEN0cmwnLCB7JG1vZGFsOiAkbW9kYWwsIHRlYW06IHRlYW19KSk7XG5cdHRoaXMudGVhbSA9IHRlYW07XG5cdGlmICh0ZWFtLm1lbWJlcnNfcHJvZ3Jlc3MgPT0gdW5kZWZpbmVkKSB7XG5cdFx0dGhpcy50ZWFtLm1lbWJlcnNfcHJvZ3Jlc3MgPSBbXTtcblx0fVxuXHR0aGlzLmNvdXJzZSA9ICRyb3V0ZVBhcmFtcy5jb3Vyc2VfbmFtZTtcblx0dGhpcy50cmFja3MgPSBbXTtcblx0aWYgKHRlYW0ubWVtYmVyc19wcm9ncmVzcy5sZW5ndGggPiAwKSB7XG5cdFx0dmFyIGNvdXJzZXMgPSB0ZWFtLm1lbWJlcnNfcHJvZ3Jlc3NbMF0uY291cnNlX3Byb2dyZXNzO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY291cnNlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKGNvdXJzZXNbaV0ubmFtZSA9PT0gdGhpcy5jb3Vyc2UpIHtcblx0XHRcdFx0dGhpcy5jb3Vyc2VOdW0gPSBpO1xuXHRcdFx0XHR2YXIgY291cnNlVHJhY2tzID0gY291cnNlc1tpXS50cmFja19wcm9ncmVzcztcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBjb3Vyc2VUcmFja3MubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHR0aGlzLnRyYWNrcy5wdXNoKGNvdXJzZVRyYWNrc1tqXS5uYW1lKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0dmFyIHNlbGYgPSB0aGlzO1xuXHR0aGlzLmdldFByb2dyZXNzRm9yTWVtYmVyVHJhY2sgPSBmdW5jdGlvbihtZW1iZXIsIHRyYWNrTnVtKSB7XG5cdFx0cmV0dXJuIG1lbWJlci5jb3Vyc2VfcHJvZ3Jlc3Nbc2VsZi5jb3Vyc2VOdW1dLnRyYWNrX3Byb2dyZXNzW3RyYWNrTnVtXS5wcm9ncmVzcztcblx0fVxufV0pXG4uY29udHJvbGxlcignVGVhbXNVbml0Q3RybCcsIFtcIiRyb3V0ZVBhcmFtc1wiLCBcInRlYW1cIiwgXCIkbW9kYWxcIiwgXCIkY29udHJvbGxlclwiLCBmdW5jdGlvbigkcm91dGVQYXJhbXMsIHRlYW0sICRtb2RhbCwgJGNvbnRyb2xsZXIpIHtcblx0YW5ndWxhci5leHRlbmQodGhpcywgJGNvbnRyb2xsZXIoJ1RlYW1zUGFyZW50Q3RybCcsIHskbW9kYWw6ICRtb2RhbCwgdGVhbTogdGVhbX0pKTtcblx0dGhpcy50ZWFtID0gdGVhbTtcblx0aWYgKHRlYW0ubWVtYmVyc19wcm9ncmVzcyA9PSB1bmRlZmluZWQpIHtcblx0XHR0aGlzLnRlYW0ubWVtYmVyc19wcm9ncmVzcyA9IFtdO1xuXHR9XG5cdHRoaXMuY291cnNlID0gJHJvdXRlUGFyYW1zLmNvdXJzZV9uYW1lO1xuXHR0aGlzLnRyYWNrID0gJHJvdXRlUGFyYW1zLnRyYWNrX25hbWU7XG5cdHRoaXMudW5pdHMgPSBbXTtcblx0aWYgKHRlYW0ubWVtYmVyc19wcm9ncmVzcy5sZW5ndGggPiAwKSB7XG5cdFx0dmFyIGNvdXJzZXMgPSB0ZWFtLm1lbWJlcnNfcHJvZ3Jlc3NbMF0uY291cnNlX3Byb2dyZXNzO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY291cnNlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKGNvdXJzZXNbaV0ubmFtZSA9PT0gdGhpcy5jb3Vyc2UpIHtcblx0XHRcdFx0dGhpcy5jb3Vyc2VOdW0gPSBpO1xuXHRcdFx0XHR2YXIgdHJhY2tzID0gY291cnNlc1tpXS50cmFja19wcm9ncmVzcztcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCB0cmFja3MubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRpZiAodHJhY2tzW2pdLm5hbWUgPT09IHRoaXMudHJhY2spIHtcblx0XHRcdFx0XHRcdHRoaXMudHJhY2tOdW0gPSBqO1xuXHRcdFx0XHRcdFx0dmFyIHRyYWNrVW5pdHMgPSB0cmFja3Nbal0udW5pdF9wcm9ncmVzcztcblx0XHRcdFx0XHRcdGZvciAodmFyIGsgPSAwOyBrIDwgdHJhY2tVbml0cy5sZW5ndGg7IGsrKykge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnVuaXRzLnB1c2godHJhY2tVbml0c1trXS5uYW1lKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0dmFyIHNlbGYgPSB0aGlzO1xuXHR0aGlzLmdldFByb2dyZXNzRm9yTWVtYmVyVW5pdCA9IGZ1bmN0aW9uKG1lbWJlciwgdW5pdE51bSkge1xuXHRcdHJldHVybiBtZW1iZXIuY291cnNlX3Byb2dyZXNzW3NlbGYuY291cnNlTnVtXS50cmFja19wcm9ncmVzc1tzZWxmLnRyYWNrTnVtXS51bml0X3Byb2dyZXNzW3VuaXROdW1dLnByb2dyZXNzO1xuXHR9XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnVGVhbVNlcnZpY2VzJywgW10pXG4uZmFjdG9yeSgnc2lkZWJhcicsIGZ1bmN0aW9uKCkge1xuXHR2YXIgaXNTaG93aW5nID0gdHJ1ZTtcblx0cmV0dXJuIHsgcm91dGVzIDpcblx0XHRbe25hbWU6J092ZXJ2aWV3JywgaHJlZjonIy9vdmVydmlldy8nfSxcblx0XHR7bmFtZTonVGVhbXMnLCBocmVmOicjL3RlYW1zLyd9LFxuXHRcdHtuYW1lOidJbnZpdGVzJywgaHJlZjonIy9pbnZpdGVzLyd9LFxuXHRcdHtuYW1lOidNYW5hZ2UnLCBocmVmOicjL21hbmFnZS8nfV0sXG5cdFx0c2hvdzpcblx0XHR7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gaXNTaG93aW5nO1xuXHRcdFx0fSxcblx0XHRcdHNldDogZnVuY3Rpb24oc2hvd2luZykge1xuXHRcdFx0XHRpc1Nob3dpbmcgPSBzaG93aW5nO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn0pXG4uZmFjdG9yeSgndXNlckVtYWlsJywgW1wiJHJvb3RTY29wZVwiLCBmdW5jdGlvbigkcm9vdFNjb3BlKSB7XG5cdHJldHVybiAkcm9vdFNjb3BlLnVzZXJFbWFpbDtcbn1dKVxuLnNlcnZpY2UoJ29BdXRoJywgW1wiJHFcIiwgXCIkbG9jYXRpb25cIiwgZnVuY3Rpb24gKCRxLCAkbG9jYXRpb24pIHtcblx0dmFyIHNpZ25pbiA9IGZ1bmN0aW9uKGltbWVkaWF0ZSkge1xuXHRcdHJldHVybiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBwID0gJHEuZGVmZXIoKTtcblx0XHRcdGdhcGkuYXV0aC5hdXRob3JpemUoe1xuXHRcdFx0XHRjbGllbnRfaWQ6IENMSUVOVF9JRCxcblx0XHRcdFx0c2NvcGU6IFNDT1BFUyxcblx0XHRcdFx0aW1tZWRpYXRlOiBpbW1lZGlhdGVcblx0XHRcdH0sIGZ1bmN0aW9uKGF1dGhSZXN1bHQpIHtcblx0XHRcdFx0aWYgKGF1dGhSZXN1bHQuZXJyb3IpIHtcblx0XHRcdFx0XHRwLnJlamVjdChhdXRoUmVzdWx0KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRwLnJlc29sdmUoYXV0aFJlc3VsdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIHAucHJvbWlzZTtcblx0XHR9XG5cdH07XG5cdHRoaXMuc2lnbnVwID0gc2lnbmluKGZhbHNlKTtcblx0dGhpcy5jaGVjayA9IHNpZ25pbih0cnVlKTtcblx0dGhpcy5leGVjdXRlID0gZnVuY3Rpb24oYXBpTWV0aG9kKSB7XG5cdFx0dmFyIHAgPSAkcS5kZWZlcigpO1xuXHRcdGdhcGkuYXV0aC5hdXRob3JpemUoe1xuXHRcdFx0Y2xpZW50X2lkIDogQ0xJRU5UX0lELFxuXHRcdFx0c2NvcGUgOiBTQ09QRVMsXG5cdFx0XHRpbW1lZGlhdGUgOiB0cnVlXG5cdFx0fSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRhcGlNZXRob2QuZXhlY3V0ZShmdW5jdGlvbihyZXNwKSB7XG5cdFx0XHRcdGlmICghcmVzcC5jb2RlKSB7XG5cdFx0XHRcdFx0cC5yZXNvbHZlKHJlc3AucmVzdWx0KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRwLnJlamVjdChyZXNwKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHAucHJvbWlzZTtcblx0fTtcblx0dGhpcy5nZXRVc2VySW5mbyA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmV4ZWN1dGUoZ2FwaS5jbGllbnQub2F1dGgyLnVzZXJpbmZvLmdldCgpKTtcblx0fTtcbn1dKVxuLnNlcnZpY2UoJ2FwaScsIFtcIm9BdXRoXCIsIFwiJHFcIiwgZnVuY3Rpb24gKG9BdXRoLCAkcSkge1xuXHR2YXIgY2FjaGUgPSB7fTtcblx0dGhpcy5kZWxldGVDYWNoZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGNhY2hlID0ge307XG5cdH1cblx0dmFyIGNhY2hlZEFwaUNhbGwgPSBmdW5jdGlvbihjYWNoZUtleSwgYXBpTWV0aG9kKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKGZvcmNlUmVmcmVzaCkge1xuXHRcdFx0dmFyIHAgPSAkcS5kZWZlcigpO1xuXHRcdFx0aWYgKGNhY2hlW2NhY2hlS2V5XSAhPSB1bmRlZmluZWQgJiYgZm9yY2VSZWZyZXNoID09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRwLnJlc29sdmUoY2FjaGVbY2FjaGVLZXldKTtcblx0XHRcdFx0cmV0dXJuIHAucHJvbWlzZTtcblx0XHRcdH1cblx0XHRcdG9BdXRoLmV4ZWN1dGUoYXBpTWV0aG9kKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcCkge1xuXHRcdFx0XHRjYWNoZVtjYWNoZUtleV0gPSByZXNwO1xuXHRcdFx0XHRwLnJlc29sdmUocmVzcCk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRwLnJlamVjdChlcnJvcik7XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBwLnByb21pc2U7XG5cdFx0fTtcblx0fTtcblx0dmFyIGNhY2hlZFRlYW1BcGlDYWxsID0gZnVuY3Rpb24odHlwZSwgYXBpTWV0aG9kKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKHBhcmFtcykge1xuXHRcdFx0dmFyIHAgPSAkcS5kZWZlcigpO1xuXHRcdFx0aWYoY2FjaGVbdHlwZSArIHBhcmFtcy50ZWFtX2tleV0gIT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdHAucmVzb2x2ZShjYWNoZVt0eXBlICsgcGFyYW1zLnRlYW1fa2V5XSk7XG5cdFx0XHRcdHJldHVybiBwLnByb21pc2U7XG5cdFx0XHR9XG5cdFx0XHRvQXV0aC5leGVjdXRlKGFwaU1ldGhvZChwYXJhbXMpKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcCkge1xuXHRcdFx0XHRjYWNoZVt0eXBlICsgcGFyYW1zLnRlYW1fa2V5XSA9IHJlc3A7XG5cdFx0XHRcdHAucmVzb2x2ZShyZXNwKTtcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRcdHAucmVqZWN0KGVycm9yKTtcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIHAucHJvbWlzZTtcblx0XHR9O1xuXHR9O1xuXHR0aGlzLmRlbGV0ZVRlYW0gPSBmdW5jdGlvbih0ZWFtKSB7XG5cdFx0aWYgKGNhY2hlW1wiZ2V0X3RlYW1zXCJdICE9IHVuZGVmaW5lZCkge1xuXHRcdFx0dmFyIHRlYW1zID0gY2FjaGVbXCJnZXRfdGVhbXNcIl1bXCJ0ZWFtc1wiXTtcblx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0ZWFtcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZih0ZWFtLnRlYW1fa2V5ID09IHRlYW1zW2ldLnRlYW1fa2V5KSB7XG5cdFx0XHRcdFx0dGVhbXMuc3BsaWNlKGksIDEpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBvQXV0aC5leGVjdXRlKGdhcGkuY2xpZW50LnRlYW1zLmRlbGV0ZSh0ZWFtKSk7XG5cdH07XG5cdHRoaXMuaW5zZXJ0VGVhbSA9IGZ1bmN0aW9uKHRlYW0pIHtcblx0XHR2YXIgcCA9ICRxLmRlZmVyKCk7XG5cdFx0dmFyIHVwZGF0ZUNhY2hlID0gY2FjaGVbXCJnZXRfdGVhbXNcIl0gIT0gdW5kZWZpbmVkO1xuXHRcdHZhciB0ZWFtcyA9IHVuZGVmaW5lZDtcblx0XHR2YXIgbmV3VGVhbSA9IHRlYW0udGVhbV9rZXkgPT0gdW5kZWZpbmVkO1xuXHRcdGlmICh1cGRhdGVDYWNoZSkge1xuXHRcdFx0dGVhbXMgPSBjYWNoZVtcImdldF90ZWFtc1wiXVtcInRlYW1zXCJdO1xuXHRcdFx0aWYodGVhbXMgPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGNhY2hlW1wiZ2V0X3RlYW1zXCJdW1widGVhbXNcIl0gPSBbXTtcblx0XHRcdFx0dGVhbXMgPSBjYWNoZVtcImdldF90ZWFtc1wiXVtcInRlYW1zXCJdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRvQXV0aC5leGVjdXRlKGdhcGkuY2xpZW50LnRlYW1zLmluc2VydCh0ZWFtKSlcblx0XHQudGhlbihmdW5jdGlvbihyZXNwKSB7XG5cdFx0XHRpZih1cGRhdGVDYWNoZSkge1xuXHRcdFx0XHRpZihuZXdUZWFtKSB7XG5cdFx0XHRcdFx0dGVhbXMucHVzaChyZXNwKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0ZWFtcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0aWYocmVzcC50ZWFtX2tleSA9PT0gdGVhbXNbaV0udGVhbV9rZXkpIHtcblx0XHRcdFx0XHRcdFx0dGVhbXNbaV0gPSByZXNwO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHAucmVzb2x2ZShyZXNwKTtcblx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0cC5yZWplY3QoZXJyb3IpO1xuXHRcdH0pO1xuXHRcdHJldHVybiBwLnByb21pc2U7XG5cdH07XG5cdHRoaXMuZ2V0SW52aXRlcyA9IGNhY2hlZEFwaUNhbGwoXCJnZXRfaW52aXRlc1wiLCBnYXBpLmNsaWVudC50ZWFtcy5pbnZpdGVzLmxpc3QoKSk7XG5cdHRoaXMuZWRpdEludml0ZSA9IGZ1bmN0aW9uKGludml0ZSkge1xuXHRcdHJldHVybiBvQXV0aC5leGVjdXRlKGdhcGkuY2xpZW50LnRlYW1zLmludml0ZXMucmVzcG9uZChpbnZpdGUpKTtcblx0fTtcblx0dGhpcy5nZXRUZWFtcyA9IGNhY2hlZEFwaUNhbGwoXCJnZXRfdGVhbXNcIiwgZ2FwaS5jbGllbnQudGVhbXMubGlzdC5hbGwoKSk7XG5cdHRoaXMuZ2V0TGVhZFRlYW1zID0gY2FjaGVkQXBpQ2FsbChcImdldF9sZWFkX3RlYW1zXCIsIGdhcGkuY2xpZW50LnRlYW1zLmxpc3QubGVhZGVyKCkpO1xuXHR0aGlzLmdldFByb2dyZXNzID0gY2FjaGVkVGVhbUFwaUNhbGwoXCJwcm9ncmVzc1wiLCBnYXBpLmNsaWVudC50ZWFtcy5wcm9ncmVzcyk7XG5cdHRoaXMuZ2V0U3dlZXBzID0gY2FjaGVkVGVhbUFwaUNhbGwoXCJzd2VlcFwiLCBnYXBpLmNsaWVudC50ZWFtcy5zd2VlcHMuZ2V0KTtcblx0dGhpcy5pbnNlcnRTd2VlcCA9IGZ1bmN0aW9uKHN3ZWVwKSB7XG5cdFx0cmV0dXJuIG9BdXRoLmV4ZWN1dGUoZ2FwaS5jbGllbnQudGVhbXMuc3dlZXBzLmluc2VydChzd2VlcCkpO1xuXHR9XG5cdHRoaXMuZGVsZXRlU3dlZXAgPSBmdW5jdGlvbihzd2VlcCkge1xuXHRcdHJldHVybiBvQXV0aC5leGVjdXRlKGdhcGkuY2xpZW50LnRlYW1zLnN3ZWVwcy5kZWxldGUoc3dlZXApKTtcblx0fVxuXHR0aGlzLmdldENvdXJzZXMgPSBjYWNoZWRBcGlDYWxsKFwiY291cnNlc1wiLCBnYXBpLmNsaWVudC50ZWFtcy5jb3Vyc2VzKCkpO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ1RlYW1EaXJlY3RpdmVzJywgW10pXG4uZGlyZWN0aXZlKCd0ZWFtVGl0bGUnLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0UnLFxuICAgIHNjb3BlOiB7XG4gICAgICB0ZWFtOiAnPSdcbiAgICB9LFxuICAgIHRlbXBsYXRlVXJsOiAnL3N0YXRpYy90ZWFtcy9wYXJ0aWFscy9jb21wb25lbnRzL3RlYW1fdGl0bGUuaHRtbCdcbiAgfTtcbn0pXG4uZGlyZWN0aXZlKCdyb3V0ZUxvYWRpbmdJbmRpY2F0b3InLCBbJyRyb290U2NvcGUnLCBmdW5jdGlvbigkcm9vdFNjb3BlKSB7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFJyxcbiAgICB0ZW1wbGF0ZVVybDogJy9zdGF0aWMvdGVhbXMvcGFydGlhbHMvY29tcG9uZW50cy9sb2FkaW5nX3NwaW5uZXIuaHRtbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG5cbiAgICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICRyb290U2NvcGUuaXNSb3V0ZUxvYWRpbmcgPSB0cnVlO1xuICAgICAgfSk7XG5cbiAgICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24oKXtcbiAgICAgICAgJHJvb3RTY29wZS5pc1JvdXRlTG9hZGluZyA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufV0pXG4uZmlsdGVyKCdwZXJjZW50YWdlJywgWyckZmlsdGVyJywgZnVuY3Rpb24gKCRmaWx0ZXIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChpbnB1dCwgZGVjaW1hbHMpIHtcbiAgICByZXR1cm4gJGZpbHRlcignbnVtYmVyJykoaW5wdXQgKiAxMDAsIGRlY2ltYWxzKSArICclJztcbiAgfTtcbn1dKVxuLmZpbHRlcigncGVuZGluZ1N3ZWVwcycsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihpdGVtcykge1xuICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICB2YXIgY29tcGFyZURhdGUgPSBuZXcgRGF0ZSgwKTtcbiAgICAgIGNvbXBhcmVEYXRlLnNldEZ1bGxZZWFyKG5vdy5nZXRGdWxsWWVhcigpKTtcblx0ICBjb21wYXJlRGF0ZS5zZXRNb250aChub3cuZ2V0TW9udGgoKSwgbm93LmdldERhdGUoKSk7XG4gICAgICB2YXIgaG91ck51bSA9IG5vdy5nZXRIb3VycygpO1xuICAgICAgdmFyIGZpbHRlcmVkID0gW107XG4gICAgICBhbmd1bGFyLmZvckVhY2goaXRlbXMsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgaWYoaXRlbS5kdC5nZXRUaW1lKCkgPiBjb21wYXJlRGF0ZS5nZXRUaW1lKCkgfHwgKGl0ZW0uZHQuZ2V0VGltZSgpID09PSBjb21wYXJlRGF0ZS5nZXRUaW1lKCkgJiYgaXRlbS5ob3VyTnVtID4gaG91ck51bSkpIHtcbiAgICAgICAgICBmaWx0ZXJlZC5wdXNoKGl0ZW0pOyBcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZmlsdGVyZWQ7XG4gICAgfTtcbn0pXG4uZmlsdGVyKCdmaXJlZFN3ZWVwcycsIGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gZnVuY3Rpb24oaXRlbXMpIHtcblx0ICB2YXIgbm93ID0gbmV3IERhdGUoKTtcblx0ICB2YXIgY29tcGFyZURhdGUgPSBuZXcgRGF0ZSgwKTtcblx0ICBjb21wYXJlRGF0ZS5zZXRGdWxsWWVhcihub3cuZ2V0RnVsbFllYXIoKSk7XG5cdCAgY29tcGFyZURhdGUuc2V0TW9udGgobm93LmdldE1vbnRoKCksIG5vdy5nZXREYXRlKCkpO1xuXHQgIHZhciBob3VyTnVtID0gbm93LmdldEhvdXJzKCk7XG5cdCAgdmFyIGZpbHRlcmVkID0gW107XG5cdCAgYW5ndWxhci5mb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbihpdGVtKSB7XG5cdCAgICBpZihpdGVtLmR0LmdldFRpbWUoKSA8IGNvbXBhcmVEYXRlLmdldFRpbWUoKSB8fCAoaXRlbS5kdC5nZXRUaW1lKCkgPT09IGNvbXBhcmVEYXRlLmdldFRpbWUoKSAmJiBpdGVtLmhvdXJOdW0gPD0gaG91ck51bSkpIHtcblx0ICAgICAgZmlsdGVyZWQucHVzaChpdGVtKTtcblx0ICAgIH1cblx0ICB9KTtcblx0ICByZXR1cm4gZmlsdGVyZWQ7XG5cdH07XG59KTtcbiIsIi8qXG5cdEBsaWNlbnNlIEFuZ3VsYXIgU25hY2tiYXIgdmVyc2lvbiAxLjAuMVxuXHTik5IgMjAxNSBUeWxlciBSb2Nrd29vZCBodHRwczovL2dpdGh1Yi5jb20vcm9ja3dvdGovYW5ndWxhci5zbmFja2JhclxuXHRMaWNlbnNlOiBNSVRcbiovXG5cbiFmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjt2YXIgbj1hLm1vZHVsZShcImFuZ3VsYXIuc25hY2tiYXJcIixbXSk7bi5mYWN0b3J5KFwic25hY2tiYXJcIixbXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24oYSl7cmV0dXJue2NyZWF0ZVdpdGhUaW1lb3V0OmZ1bmN0aW9uKG4sZSl7YS4kYnJvYWRjYXN0KFwiY3JlYXRlU25hY2tiYXJXaXRoVGltZW91dFwiLHtjb250ZW50Om4sZHVyYXRpb246ZX0pfSxjcmVhdGU6ZnVuY3Rpb24obixlKXthLiRicm9hZGNhc3QoXCJjcmVhdGVTbmFja2JhclwiLHtjb250ZW50Om4saWQ6ZX0pfSxyZW1vdmU6ZnVuY3Rpb24obil7YS4kYnJvYWRjYXN0KFwicmVtb3ZlU25hY2tiYXJcIix7aWQ6bn0pfX19XSksbi5kaXJlY3RpdmUoXCJzbmFja2JhclwiLFtcIiRyb290U2NvcGVcIixcIiRjb21waWxlXCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKG4sZSxjKXtyZXR1cm4gZnVuY3Rpb24odCxyLG8pe3ZhciBzPWEuZWxlbWVudChyKSxpPW8uc25hY2tiYXJEdXJhdGlvbnx8M2UzLHU9by5zbmFja2JhclJlbW92ZURlbGF5fHwyMDtuLiRvbihcImNyZWF0ZVNuYWNrYmFyV2l0aFRpbWVvdXRcIixmdW5jdGlvbihuLHIpe3ZhciBvPSc8ZGl2IGNsYXNzPVwic25hY2tiYXIgc25hY2tiYXItb3BlbmVkXCI+PHNwYW4gY2xhc3M9XCJzbmFja2Jhci1jb250ZW50XCI+JytyLmNvbnRlbnQrXCI8L3NwYW4+PC9kaXY+XCIsYj1hLmVsZW1lbnQoZShvKSh0KSk7cy5hcHBlbmQoYiksYyhmdW5jdGlvbigpe2IucmVtb3ZlQ2xhc3MoXCJzbmFja2Jhci1vcGVuZWRcIiksYyhmdW5jdGlvbigpe2IucmVtb3ZlKCl9LHUsITEpfSxyLmR1cmF0aW9ufHxpLCExKX0pLG4uJG9uKFwiY3JlYXRlU25hY2tiYXJcIixmdW5jdGlvbihuLGMpe3ZhciByPSc8ZGl2IGNsYXNzPVwic25hY2tiYXIgc25hY2tiYXItb3BlbmVkIHNuYWNrYmFyLWlkLScrYy5pZCsnXCI+PHNwYW4gY2xhc3M9XCJzbmFja2Jhci1jb250ZW50XCI+JytjLmNvbnRlbnQrXCI8L3NwYW4+PC9kaXY+XCIsbz1hLmVsZW1lbnQoZShyKSh0KSk7cy5hcHBlbmQobyl9KSxuLiRvbihcInJlbW92ZVNuYWNrYmFyXCIsZnVuY3Rpb24obixlKXt2YXIgYz1hLmVsZW1lbnQoc1swXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic25hY2tiYXItaWQtXCIrZS5pZCkpO2MucmVtb3ZlQ2xhc3MoXCJzbmFja2Jhci1vcGVuZWRcIiksYy5yZW1vdmUoKX0pfX1dKX0oYW5ndWxhcik7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
